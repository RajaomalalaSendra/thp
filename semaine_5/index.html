<!DOCTYPE html>
<html class="loading" lang="fr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../style/bootstrap.css">
    <title>The hacking project offline</title>
  </head>
  <body class="vertical-layout vertical-menu 2-columns  menu-expanded fixed-navbar" data-open="click" data-menu="vertical-menu" data-color="bg-gradient-x-primary-blue" data-col="2-columns">
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <h1 class="navbar-brand">THE HACKING PROJECT</h1>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarColor01">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="/thp">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/thp/features">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/thp/about">About</a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search">
            <button class="btn btn-secondary my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
      </nav>

<div class="container">
    <a type="button" class="btn btn-dark " href="/thp/semaine_1/">Semaine 1</a>
    <a type="button" class="btn btn-dark" href="/thp/semaine_2/">Semaine 2</a>
    <a type="button" class="btn btn-dark" href="/thp/semaine_3/">Semaine 3</a>
    <a type="button" class="btn btn-dark" href="/thp/semaine_4/">Semaine 4</a>
    <a type="button" class="btn btn-dark btn-lg" href="/thp/semaine_5/">Semaine 5</a>  
</div>

<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="content-header row"></div>
    
      <div class="container">
    <div class="card">
  <div class="card-header">
    <h4 class="text-center"> Programme jour par jour</h4>
  </div>
  <div class="card-body">
    <div class="text-center">
    <a href="/thp/semaine_5">
      <button class="btn btn-secondary btn-outline-dark btn-lg mr-4">
        <i class="fa fa-terminal"></i>&nbsp;&nbsp;&nbsp;Lun
      </button>
</a>    <a href="/thp/semaine_5/jour_2">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
        <i class="fa fa-code"></i>&nbsp;&nbsp;&nbsp;Mar
      </button>
</a>    <a href="/thp/semaine_5/jour_3">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
        <i class="fa fa-desktop"></i>&nbsp;&nbsp;&nbsp;Mer
      </button>
</a>    <a href="/thp/semaine_5/jour_4">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
      <i class="fa fa-folder-open"></i>&nbsp;&nbsp;&nbsp;Jeu
      </button>
</a>    <a href="/thp/semaine_5/jour_5">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
      <i class="fa fa-bullhorn"></i>&nbsp;&nbsp;&nbsp;Ven
      </button>
</a>    </div>
  </div>
</div>
<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="content-header row"></div>
    
      
<div class="content-body">
      <h2 class="text-center">Découverte de Rails</h2>
      <h4 class="text-center">Rails intermédiaire</h4>
  <div class="row">
     <div class="col-xl-3 col-lg-6 col-md-12">
  <div class="card">
    <div class="card-content">
      <div class="card-body">
        <div class="media d-flex">
          <div class="align-self-top">
              <i class="ft-calendar icon-opacity info font-large-4"></i>
          </div>
          <div class="media-body text-right align-self-bottom mt-3">
              <span class="d-block mb-1 font-medium-1"></span>
              <h3 class="info mb-0">
                 Jour 19 / 55</h3>
          </div>
        </div>
        <div class="progress progress-sm mt-1 mb-0 box-shadow-2">
            <div class="progress-bar bg-gradient-x-info" role="progressbar" style="width: 34%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="120">
            </div>
        </div>
      </div>
    </div>
  </div>
 </div>


    <div class="col-xl-3 col-lg-6 col-md-12">
  <div class="card">
    <div class="card-content">
      <div class="card-body">
        <div class="media d-flex">
          <div class="align-self-top">
            <i class="ft-heart icon-opacity danger font-large-4"></i>
          </div>
          <div class="media-body text-right align-self-bottom mt-3">
            <span class="d-block mb-1 font-medium-1">Jokers restant</span>
            <h3 class="danger mb-0">
                3
            </h3>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

    <div class="col-xl-3 col-lg-6 col-md-12">
    <div class="card">
        <div class="card-content">
            <div class="card-body">
                <div class="media d-flex">
                    <div class="align-self-top">
                        <a href="/dashboard/assignments?locale=fr">
                           <i class="ft-fast-forward icon-opacity warning font-large-4"></i>
</a>                    </div>
                    <div class="media-body text-right align-self-bottom mt-3">
                        <span class="d-block mb-1 font-medium-1">Missions</span>
                            <div class="badge border-danger danger badge-border">Pas inscrit</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

  </div>
  <div class="row">
        <div class="container">
    <div class="col-xl-12 col-lg-12 col-md-12">
    <div class="card">
        <div class="card-header">
        <h1 >Rails intermédiaire
                <i class="fa fa-space-shuttle text-danger"></i>
        </h1>
        
        </div>
        <div class="card-content">
        <div class="card-body">
            <div class="card-text">
            <h2 class="text-center">Découverte de Rails</h2>
            <div class="cd-horizontal-timeline loaded">
                <div class="timeline">
                <div class="events-wrapper">
                    <div class="events" style="width: 1800px;">
                    <ol>
                            <li>
                                <a class="selected" style="left:120px;" data-toggle="tooltip" data-placement="top" title="Découverte de Rails" href="/dashboard/weeks/5/days/1?locale=fr">
                                    Lun
                                        <i class="fa fa-rocket text-danger" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Projet à rendre ce jour-là"></i>

</a>                                </li>
                                <li>
                                    <a style="left:240px;" href="/dashboard/weeks/5/days/2?locale=fr">
                                        Mar
                                            <i class="fa fa-pencil text-success" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Corrections cette journée là" ></i>


</a>                                </li>
                                <li>
                                    <a style="left:360px;" href="/dashboard/weeks/5/days/3?locale=fr">
                                        Mer
                                            <i class="fa fa-beer text-warning" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Rendez-vous pour boire un coup"></i>

</a>                                </li>
                                <li>
                                    <a style="left:480px;" href="/dashboard/weeks/5/days/4?locale=fr">
                                        Jeu
                                            <i class="fa fa-rocket text-danger" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Projet à rendre ce jour-là"></i>

</a>                                </li>
                                <li>
                                    <a style="left:600px;" href="/dashboard/weeks/5/days/5?locale=fr">
                                        Ven
                                            <i class="fa fa-pencil text-success" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Corrections cette journée là" ></i>


</a>                                </li>
                    </ol>
                </div>
                </div>
            </div>
            </div>
        </div>
        </div>
    </div>
    </div>
<div>
  </div>

  <!-- Les fameuses corrections qui n'arrivnet que les jours concernés -->


    <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #5E66E5 " >
          <h1>Cours : Rails, front &amp; back</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          <h2>1. Introduction</h2>
<p>BON, maintenant que tu sais faire des models en béton armé, nous allons pouvoir passer à la suite : passer ces models dans le front de rails. Oh yeah ! Dans cette ressource, nous allons voir les bases basiques de rails : le reste du MVC, les premières déclarations de routes, jouer avec ses premiers params.</p>

<p>Cette ressource aura pour but de te montrer rails avec un point de vue venant de Sinatra, afin que tu ne sois pas perdu dans ces premières bases de rails et que tu aies un aperçu global du framework en front.</p>

<p>L'avantage de ce point de vue bas-niveau est que tu vas comprendre rapidement qui fait quoi etc. Le défaut est que ce sera comme Sinatra : tu seras rapidement perdu pour savoir qui fait quoi etc. C'est pour cela que pour le reste de la semaine, nous allons passer sur la plupart des éléments vus de la vidéo avec les bonnes pratiques adaptées à rails. Par exemple, aujourd'hui nous verrons comment faire de belles routes qui font plaisir à un vrai dev.</p>

<h2>2. Historique</h2>
<p>Tu connais déjà rails, mais souviens-toi de ceci : le framework a été créé en 2005 par David Heinemeier Hansson et repose sur deux principes simples :</p>

<ul>
	<li>Convention Over Configuration</li>
	<li>Don't Repeat Yourself</li>
</ul>


<h2>3. La ressource</h2>
<p>Pour cette ressource, j'ai réalisé <a href="https://youtu.be/VEm_zMEnajc" target="_blank">une vidéo</a> où j'explique pendant 50mn les bases de rails. MVC, GET/POST, params. Avec ceci, tu seras capable de créer tes premières pages. Le but de cette vidéo est de te donner un aperçu de compréhension dans rails, afin de ne pas te perdre dans les prochains projets. Les <i>conventions</i> de rails ne sont pas respectées, donc pas besoin de prendre des notes 😉</p>

<h2>4. Points importants à retenir</h2>
<p>Rails en venant du web bas-niveau, c'est aussi simple qu'une <a href="https://youtu.be/VEm_zMEnajc" target="_blank">vidéo de féfé</a>. </p>

<h2>5. Pour aller plus loin</h2>
<p>Comme d'habitude, les rails guides sont assez géniaux pour comprendre rails. Par exemple, <a href="https://guides.rubyonrails.org/getting_started.html">le guide d'introduction</a> explique les bases de rails. Nous allons reprendre une majorité de ce guide durant cette semaine, donc n'hésite pas à le parcourir !</p>

          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #5E66E5 " >
          <h1>Cours : En route Simone !</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          

<h2>1. Introduction</h2>
<p>"Simone, c'est elle qui conduit, c'est moi qui klaxonne". Bien configurer ses routes dans Rails c'est important. Et comme dirait Loïc mon mentor :</p>
<blockquote class="blockquote pl-1 border-left-primary border-left-3">
  <p class="mb-0">Quand je rentre dans le dossier d'une app Rails, je regarde deux choses pour voir si le code n'est pas dégueulasse : le fichier <code>schema.rb</code> pour vérifier la gueule de la BDD, et le fichier <code>routes.rb</code> pour voir si les routes ne sont pas déconnantes.</p>
  <footer class="blockquote-footer">Loïc Delmaire</footer>
</blockquote>

<p>Avec Sinatra, les informations des routes n'étaient pas très pratiques à la lecture, car elles étaient contenues dans notre controller et donc mélangées à des méthodes et du code. En Rails, ça va être bien plus agréable : le framework a un fichier dédié aux routes qui s'appelle <code>routes.rb</code>. Nous allons voir ensemble comment le remplir.</p>


<h2>2. Historique</h2>
<p>Le routing remonte aux origines d'internet. Tim Berners-Lee a inventé le protocole HTTP qui envoie des données par requêtes. Le premier type de requête, aux prémices d'internet, fut la requête GET, qui demande une page à un serveur et obtient en réponse du HTML.</p>

<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">📚 INSTANT CULTURE GÉ</h4>
      <p class="card-text">Tu peux faire un GET depuis ton terminal grâce à <code>curl</code>. Teste donc en faisant <code>$ curl http://freebox.com/</code> et compare avec le code source de http://freebox.com/ dans ton navigateur.</p>
    </div>
  </div>
</div>


<p>Avec le temps, d'autres types de requêtes sont apparues. On pense à POST, mais il en existe <a href="https://fr.wikipedia.org/wiki/Hypertext_Transfer_Protocol?oldformat=true#M%C3%A9thodes" target="_blank">d'autres qui ont chacune leur utilité</a>. Rails utilise 5 de ces méthodes :</p>

<ul>
  <li><code>GET</code> : utilisée pour demander une page (et derrière la renvoyer à l'utilisateur) ;</li>
  <li><code>POST</code> : utilisée pour recevoir de l'information d'un utilisateur et derrière créer une ressource en base ;</li>
  <li><code>PUT</code> / <code>PATCH</code> : utilisées pour recevoir de l'information d'un utilisateur et derrière mettre à jour une ressource en base ;</li>
  <li><code>DELETE</code> : utilisée pour demander la suppression une ressource en base.</li>
</ul>


<h2>3. La ressource</h2>
<h3>3.0. Introduction</h3>
<p>Pour cette ressource, nous allons construire rapidement et à la main une petite app Rails afin que tu puisses tester ce dont nous allons parler. Crée donc une application Rails qui s'appelle <code>yolo_test</code>, mets-toi dans le dossier, fais ton <code>bundle install</code>, puis crée un controller rapido avec cette commande : <code>$ rails generate controller static_pages home</code>. Maintenant lance le serveur.</p>


<h3>3.1. Quel est le rôle du fichier <code>routes.rb</code> ?</h3>
<p>Quand un utilisateur interagit avec un site web, il envoie une requête HTTP contenant un verbe (GET/POST/PUT/etc.) et une URL. Par exemple s'il va sur la page d'accueil de Google, cela correspond à un <code>GET</code> sur <code>www.google.com</code>. S'il remplit un formulaire pour s'inscrire sur Facebook, son navigateur fait pour lui un <code>POST</code> sur <code>www.facebook.com/users/new/</code>, etc. <br>
Bref, quand un serveur hébergeant un app Rails reçoit une requête HTTP d'un utilisateur, le premier endroit où il va aller c'est le fichier <code>routes.rb</code> pour 1) savoir quoi faire de cette requête et 2) renvoyer les bonnes informations à l'utilisateur. Par exemple si tu vas sur la page <a href="http://localhost:3000/static_pages/home" target="_blank">/static_pages/home</a>, le serveur te renverra (cf. ton terminal):</p>

<pre><code class="language-shell">Started GET "/static_pages/home" for 127.0.0.1 at 2018-10-24 17:19:47 +0200
Processing by StaticPagesController#home as HTML
  Rendering static_pages/home.html.erb within layouts/application
  Rendered static_pages/home.html.erb within layouts/application (0.8ms)
Completed 200 OK in 850ms (Views: 844.6ms | ActiveRecord: 0.0ms)</code></pre>

<p>Cela veut dire :</p>
<ol>
  <li>Qu'il a reçu une requête GET pour <code>/static_pages/home</code></li>
  <li>Que cette requête est renvoyée vers le controller StaticPages dans la méthode <code>#home</code> en tant que HTML (on aurait pu demander en JSON par exemple avec <a href="http://localhost:3000/static_pages/home.json" target="_blank">/static_pages/home.json</a>)</li>
  <li>Qu'il doit générer le fichier <code>static_pages/home.html.erb</code> et qu'il l'a fait en 0.8ms</li>
  <li>Et qu'il renvoie un code 200 (= "succès de la requête") OK en même pas une seconde</li>
</ol>

<p>A l'inverse, si tu allais sur une adresse inexistante comme <a href="http://localhost:3000/oisgfjsdklfdsk" target="_blank">/oisgfjsdklfdsk</a>, le serveur te dirait un truc du genre : </p>
<pre><code class="language-shell">Started GET "/oisgfjsdklfdsk" for 127.0.0.1 at 2018-10-24 17:32:45 +0200
  
ActionController::RoutingError (No route matches [GET] "/oisgfjsdklfdsk"):
  
actionpack (5.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
BLABLABLABLA ERROR BLABLA</code></pre>

<p>Si tu as suivi : il a reçu ta requête <code>GET</code> sur  <code>/oisgfjsdklfdsk</code> mais elle ne correspond à aucune route définie (d'où le "RoutingError") donc il te répond "j'ai rien mon coco - erreur". Un serveur en production aurait typiquement retourné un code 404 (= "page non trouvée").</p>

<p><b>En résumé : le fichier <code>routes.rb</code> est ni plus ni moins que le routeur de ton application Rails</b>. Comme on te l'avait expliqué lors de la présentation du modèle MVC, <b>le routeur va dire : "telle requête HTTP (une requête est définie par un verbe GET/POST/PUT/etc. et une URL) doit renvoyer l'utilisateur vers telle méthode Ruby de tel controller"</b>. Ces méthodes Ruby, au sein du controller, feront ensuite leur travail d'interroger (ou non) des models pour finalement construire une view qu'on affichera à l'utilisateur. <br>
Je te remets le schéma d'une app en MVC pour que tu resitues bien tout ça ! </p>

<img src="https://i.imgur.com/411m4Ch.png" class="img-fluid">

<p>Tu l'as compris : le fichier <code>routes.rb</code> est non seulement le premier fichier qu'un mentor technique ira regarder, mais <b>c'est aussi la porte d'entrée de tous les utilisateurs de ton app </b>! Il faut absolument bien le maîtriser donc nous allons t'apprendre comment s'en servir.</p>

<h3>3.2. Écrire sa première route</h3>
<p>Pour écrire ta première route, nous allons prendre un exemple très simple : une route qui permet d'afficher la page "contact" de ton site web. <br>
Pour la créer, c'est plutôt simple : va dans le fichier <code>routes.rb</code> et rajoute la ligne suivante (entre le <code>do</code> et le <code>end</code> bien entendu) :</p>

<pre><code class="language-ruby">get '/static_pages/contact', to: 'static_pages#contact'</code></pre>

<p>Voilà. Avant de te l'expliquer, testons-la : saisis l'URL <a href="http://localhost:3000/static_pages/contact">http://localhost:3000/static_pages/contact</a> dans ton navigateur. Le serveur devrait te renvoyer quelque chose comme : </p>

<pre><code class="language-shell">Started GET "/static_pages/contact" for 127.0.0.1 at 2018-10-24 17:50:34 +0200
  
AbstractController::ActionNotFound (The action 'contact' could not be found for StaticPagesController):
  
actionpack (5.2.1) lib/abstract_controller/base.rb:129:in `process'
BLABLABLABLA ERROR BLABLA</code></pre>

<p>Cette fois, pas de "RoutingError" mais un "ActionNotFound" : il trouve la route, mais pas la méthode <code>#contact</code> dans le controller <code>StaticPages</code>. Si tu vas vérifier dans le controller <code>StaticPages</code> (fichier <code>static_pages_controller.rb</code>), tu remarqueras qu'en effet, la méthode <code>#contact</code> n'existe pas. On s'occupera de corriger cela plus tard.</p>

<p>Maintenant, explorons les trois éléments de la route <code>get '/static_pages/contact', to: 'static_pages#contact'
</code> que nous t'avons fait rajouter:</p>

<ul>
  <li><code>get</code> : c'est le verbe de la méthode HTTP. Ici, nous voulons une route de base qui ne fait qu'afficher une page (contact) : c'est donc un GET. Dans d'autres cas on aurait pu utiliser <code>post</code> (pour la création d'un article par ex), ou <code>delete</code> (pour la suppression d'un user par ex).</li>
  <li><code>'/static_pages/contact'</code> : c'est l'URL sur laquelle l'utilisateur va faire sa requête. Et dans le cas d'un <code>get</code>, c'est tout simplement l'adresse qu'il faut saisir dans la barre de navigation pour afficher la page (pas besoin de préciser le nom de domaine, Rails le rajoute : "http://localhost:3000/" en local, "http://www.thegossipproject.com" en PROD 🥳 .). <br>
  À noter qu'on a choisi <a href="http://localhost:3000/static_pages/contact" target="_blank">/static_pages/contact</a> comme URL, mais on aurait pu la mettre sur <code>/contact</code>, ou <code>/static_pages/kikoulolmdr</code> ou encore sur <code>/oisgfjsdklfdsk</code> : c'est toi qui décides.</li>
  <li><code>to: 'static_pages#contact'</code> : cette partie indique vers quelle méthode et quel controller la route doit pointer. Dans cet exemple, la route (= un verbe de méthode et une URL) renvoie à la méthode <code>#contact</code> du controller <code>static_pages</code>. <br>
  Tu aurais pu renvoyer vers le controller <code>wesh</code> et sa fameuse méthode <code>#bonjour</code> : c'est encore toi qui décides.</li>
</ul>

<div class="card box-shadow-0 border-danger">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">⚠️ ALERTE ERREUR COMMUNE</h4>
      <p class="card-text">La syntaxe pour la rédaction d'une route est très importante. Si tu oublies les guillemets, la virgule, le <code>to:</code> ou que tu inverses le <code>controller#method</code>, ça va tout casser.</p>
    </div>
  </div>
</div>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🤓 QUESTION RÉCURRENTE</h4>
      <p class="card-text"><b>Mais dis donc Jamy, comment rediriger la page d'accueil de mon site (la première page que les gens vont voir) qui généralement a une URL presque vide du genre <code>/</code> ?</b><br>
      Excellente question. Pour ceci, il te faudra écrire : </p>
      <pre><code class="language-ruby">root 'controller#method'</code></pre>
      <p>Voilà. Le controller est celui de ton choix, et la méthode idem (en général <code>home</code> ou <code>index</code> sont pas mal). Comme la requête est forcément en GET, Rails comprend tout seul comme un grand quoi faire avec ça. Pépouze.</p>
    </div>
  </div>
</div>


<h3>3.3. $ rails routes</h3>
<p>Maintenant, nous allons voir une commande <b>indispensable</b> quand on fait du Rails : <code>$ rails routes</code>. Cette commande permet d'afficher toutes les routes de ton application, avec quelques paramètres très pratiques. Voyons avec nos routes actuelles :</p>

<pre><code class="language-shell">➜  yolo_test git:(master) ✗ rails routes
                   Prefix Verb URI Pattern                                                                              Controller#Action
                     root GET  /                                                                                        controller#index
        static_pages_home GET  /static_pages/home(.:format)                                                             static_pages#home
     static_pages_contact GET  /static_pages/contact(.:format)                                                          static_pages#contact
       rails_service_blob GET  /rails/active_storage/blobs/:signed_id/*filename(.:format)                               active_storage/blobs#show
rails_blob_representation GET  /rails/active_storage/representations/:signed_blob_id/:variation_key/*filename(.:format) active_storage/representations#show
       rails_disk_service GET  /rails/active_storage/disk/:encoded_key/*filename(.:format)                              active_storage/disk#show
update_rails_disk_service PUT  /rails/active_storage/disk/:encoded_token(.:format)                                      active_storage/disk#update
     rails_direct_uploads POST /rails/active_storage/direct_uploads(.:format)                                           active_storage/direct_uploads#create</code></pre>


<p>Pour chaque route paramétrée, Rails va nous afficher 4 infos :</p>
<ul>
  <li>le <code>Prefix</code> : ok c'est LE truc ultra important. On va le voir, pour pointer vers cette route depuis notre code, on va se servir de ce <b>prefix</b>. La ressource sur les liens en Rails va t'expliquer pourquoi donc pour le moment, rappelle-toi que pour trouver le <b>prefix</b> d’une route, il faut faire <code>$ rails routes</code></li>
  <li>le <code>Verb</code> : le verbe de notre méthode HTTP (GET/POST/etc.).</li>
  <li>le <code>URI Pattern</code> : l'adresse de notre route au sein de l'app Rails. Elle peut être dynamique (on verra ça plus tard) et le <code>(.:format)</code> n'est pas très important pour le moment (en gros on peut faire des routes en <code>.json</code> ou <code>.mp4</code>, mais la majorité seront sans extension en HTML)</li>
  <li>le <code>Controller#Action</code> : indique vers quel controller et quelle méthode la route renvoie</li>
</ul>

<p>Les routes avec <code>active_storage</code> concernent Active Storage, une solution puissante de gestion de fichiers (nous la verrons dans la semaine de Rails Avancé). Pour le moment elles ne nous concernent pas, mais elles sont là.</p>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🚀 ALERTE BONNE ASTUCE</h4>
      <p class="card-text">La commande <code>$ rails routes</code> peut être conjuguée avec d'autres commandes de lignes de commande grâce à <code>|</code>. Par exemple, si tu fais <code>$ rails routes | grep static_pages</code>, la commande ne te sortira que les routes avec <code>static_pages</code> à l'intérieur. Très pratique quand on a beaucoup de routes à gérer et qu'on veut éviter de scroller dans son terminal.</p>
    </div>
  </div>
</div>

<h3>3.4. Les routes dynamiques</h3>

<p>Dans pas mal de sites, on peut accéder aux profils utilisateurs en faisant <code>tonsite.com/users/id_de_l'utilisateur</code>, par exemple en allant sur <a href="https://www.facebook.com/1000" target="_blank">https://www.facebook.com/1000</a>, tu seras redirigé vers le 1000ème profil créé sur Facebook. Fais des tests sur d'autres profils. Note marrante : une fois qu'il a créé 3 profils de test en base, devine qui s'est inscrit en 4ème profil sur Facebook 😉 ?</p>

<p>Alors comment fait-on pour paramétrer chaque route qui pointe vers chaque bon profil alors qu'il existe des millions de profils chez FB ? Tu te doutes bien que Zuck n'a pas codé un fichier de routes du genre :</p>

<pre><code class="language-ruby">get '/4', to: 'users#zuck'
get '/5', to: 'users#chris_hughes'
get '/6', to: 'users#moskov'</code></pre>

<p>La solution est un classique des routeurs : il suffit de pouvoir insérer une variable dans l'URL ! <b>Une variable est identifiée dans une route par un <code>:</code> qui précède son nom</b>. Par exemple, tu peux écrire dans les routes :</p>
<pre><code class="language-ruby">get '/users/:un_nom_de_variable', to: 'users#méthode'</code></pre>

<p>En faisant ça, j'ai inséré une variable que j'appelle <code>un_nom_de_variable</code> dans ma route et ainsi j'indique au routeur qu'il doit pouvoir gérer n'importe quel string saisi dans l'URL après "/users/". Il acceptera les URLs suivantes : "/users/1234", tout comme "/users/nonolerobot" ou encore "/users/salut_la_moussaille".<br>
Mais la partie intéressante c'est que cette variable peut être récupérée et utilisée ensuite. C'est possible grâce à l'existence, dans toute app Rails, d'un hash nommé <code>params</code>. Il va automatiquement stocker à la clef <code>"un_nom_de_variable"</code> la valeur de la variable (qui est un string). Quelques exemples pour te montrer comme <code>params</code> fonctionne si une route <code>get '/users/:un_nom_de_variable'</code> existe : </p>
<ul>
  <li>Si l'utilisateur tape comme URL <code>localhost:3000/users/123</code>, on aura <code>params{"un_nom_de_variable"} = "123"</code></li>
  <li>Si l'utilisateur tape comme URL <code>localhost:3000/users/jose_aldo</code>, on aura <code>params{"un_nom_de_variable"} = "jose_aldo"</code></li>
  <li>Si l'utilisateur tape comme URL <code>localhost:3000/users/salut_la_moussaille</code>, on aura <code>params{"un_nom_de_variable"} = "salut_la_moussaille"</code></li>
  <li>etc.</li>
</ul>

<p>Si ta mémoire de Sinatra et de MVC est bonne, tu te souviens que le hash <code>params</code> peut être utilisé ensuite dans le controller qui est appelé par la route (ici le controller <code>users</code>). Ainsi, dans le code de ton controller, tu pourrais utiliser cette information pour afficher quelque chose de pertinent. <br>
Par exemple, si l'utilisateur va sur la route <code>'users/:un_nom_de_variable'</code>, tu vas vouloir lui afficher le profil de l'utilisateur portant le numéro stocké dans <code>params{"un_nom_de_variable"}</code>. On cherchera l'utilisateur avec un petit <code>User.find(xxx)</code>, ce qui donne :</p>

<pre><code class="language-ruby">class UsersController < ApplicationController
  def méthode
    @user = User.find(params[:un_nom_de_variable])
  end
end</code></pre>

<p>Et voilà, à partir de là, l'objet <code>@user</code> correspond au bon utilisateur : il est facile d'en afficher les infos.</p>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🚀 ALERTE BONNE ASTUCE</h4>
      <p class="card-text">Rails est langage <b>Convention Over Configuration</b>, voici une convention simple : quand tu t'attends à avoir un id dans l'URL, appelle ce paramètre <code>:id</code>, et non pas <code>:un_nom_de_variable</code>. </p>
    </div>
  </div>
</div>


<div class="card box-shadow-0 border-danger">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">⚠️ ALERTE ERREUR COMMUNE</h4>
      <p class="card-text"><b>Cette partie sur les routes dynamiques est très importante à comprendre, mais elle n'est pas triviale</b>. Nombre de moussaillons mettent du temps à comprendre l'usage de <code>params</code> et sont perdus quand on leur demande de récupérer de l'info contenue dans une URL dynamique. Donc lis bien ce cours et surtout parle en avec tes camarades moussaillons : il faut que tu le comprennes bien ! </p>
      <p>Si toutefois tu avais un doute en codant une route dynamique, voici sont deux conseils qui t'aideront un max :</p>
      <ul>
        <li><code>params</code> est souvent affiché dans le serveur. Donc après avoir saisi une route dynamique dans le navigateur, regarde ton terminal et cherche l'endroit où <code>Parameters: { … }</code> est imprimé : ça va t'aider à en extraire l'information que tu cherches.</li>
        <li>On insistera jamais assez : <b>"dans le doute, mets des puts partout"</b>. C'est particulièrement vrai avec <code>params</code>. Rajoute des <code>puts params</code> dans la méthode du controller pour qu'il s'affiche dans le terminal. En voyant son contenu, tu pigeras plus facilement comment l'utiliser. <br>
        Par exemple, copie-colle ce pavé dans la méthode de ton controller :</li>
      </ul>
      <pre><code class="language-ruby">def méthode
  puts "Salut, je suis dans le serveur"
  puts "Ceci est mon super params : #{params}"
  puts "Trop bien ! Et ceci est ce que l'utilisateur a passé dans tel champ : #{params["tel_champ"]}"
  puts "De la bombe, et donc ça, c’est doit être ce que l'utilisateur a dans un autre champ : #{params["un_autre_champ"]}"
  puts "Ça déchire sa mémé, bon allez je m'en vais du serveur, ciao les BGs !"
end</code></pre>
      <p>Sinon, plus simplement, tu peux rajouter : </p>
            <pre><code class="language-ruby">def méthode
  puts "$" * 60 #ça affiche une ligne de 60 symboles $ facilement visible dans le terminal
  puts params #tu sais que params doit s'afficher entre les 2
  puts "$" * 60
end</code></pre>
      <p>Sérieux, ça te sauvera des vies au début.</p>
    </div>
  </div>
</div>

<h3>3.5. Routes dynamiques : mise en pratique</h3>
<p>Rien ne vaut la pratique pour comprendre une notion. On va paramétrer ensemble notre première route dynamique ! Cette route aura pour objectif d'afficher dans le terminal un message saisi dans l'URL.</p>

<p>Commençons par créer un controller <code>message</code> relié à une view <code>show</code> grâce à la commande <code>$ rails g controller message show</code>. Maintenant lance ton serveur.</p>

<p>Allez, paramétrons notre route dynamique. Va dans <code>routes.rb</code> : tu verras que Rails a automatiquement rajouté une route <code>get 'message/show'</code> qui est équivalent à <code>  get 'message/show', to: 'message#show'</code>. Grâce à cette route, si tu vas sur <a href="http://localhost:3000/message/show">/message/show</a>, tu vois s'afficher une page HTML standard (fais le test). <br>
Change la route pour y insérer une variable <code>user_entry</code> mais tout en continuant de pointer vers la méthode <code>#show</code>: </p>

<pre><code class="language-ruby">get 'message/:user_entry', to: 'message#show'</code></pre>

<p>Parfait. Maintenant, passons au controller. <br> Si tu vas dans <code>/app/controller/message_controller.rb</code>, tu verras qu'il est plutôt vide… mais il contient bien une méthode <code>#show</code>, vide elle aussi. Cette méthode a aussi été automatiquement générée par la commande <code>$ rails g controller message show</code>. Et c'est vers cette méthode que la route dynamique, que nous venons de créer, pointe ! </p>
<p> Quand l'utilisateur saisira une URL du type "message/quelque_chose", le routeur redirigera vers la méthode <code>show</code> et celle-ci s'exécutera. Donc maintenant, modifie la méthode <code>show</code> afin qu'elle fasse des <code>puts</code> dans le terminal de ton serveur Rails :</p>

<pre><code class="language-ruby">class MessageController < ApplicationController
  def show
    puts "$" * 60
    puts "Voici le message de l'URL :"
    puts  params[:user_entry]
    puts "$" * 60
  end
end
</code></pre>

<p> Comme tu peux le lire, nous mettons deux sortes de balises <code>puts "$" * 60</code> pour facilement trouver notre message dans le terminal. Ensuite, nous faisons le <code>puts</code> du contenu de <code>params</code> à la key <code>:user_entry</code>.</p>

<p>Maintenant, tout est prêt ! Fais des essais dans ton navigateur, en allant sur les URL <a href="http://localhost:3000/message/coucou">/message/coucou</a> ou <a href="http://localhost:3000/message/54">/message/54</a> ou même <a href="http://localhost:3000/message/on%20peut%20%C3%A9crire%20avec%20des%20espaces%20!">/message/on peut écrire avec des espaces !</a>. En parallèle surveille ton terminal : tu devrais voir le message saisi dans ton URL après "/message/" qui s'affiche en lieu et place de ton <code>puts params[:user_entry]</code></p>

<p>TADAM ! Tu as fait une route dynamique dont tu utilises le contenu dans to controller grâce à <code>params</code>.</p>


<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🚀 ALERTE BONNE ASTUCE (bis)</h4>
      <p class="card-text"><p>Il est tout à fait possible d'avoir plusieurs variables dans une route dynamique, par exemple :</p>
      <pre><code class="language-ruby">get '/week/:week_position/day/:day_position', to: 'days#show'</code></pre>
      <p>Ce qui aura pour effet de tout stocker dans <code>params</code> :</p>
      <pre><code class="language-ruby">Parameters: {"week_position"=>"valeur_a", "day_position"=>"valeur_b"}</code></pre>
      <p>Et puis à partir de là tu peux jouer avec ces valeurs dans le code de ton controller <code>days</code> ou dans les views.</p>
    </div>
  </div>
</div>

<h2>4. Points importants à retenir</h2>
<p>Un utilisateur navigue et interagit avec un site web en effectuant des requêtes. Une requête est définie par un verbe GET/POST/PUT/etc. et une URL. Le rôle du routeur (dans Rails, il s'agit du fichier <code>routes.rb</code>) est de rediriger une requête vers la méthode d'un controller de l'application.</p>
<p>Faire une route c'est comme ça :</p>
<pre><code class="language-ruby">get '/static_pages/contact', to: 'controller#method'</code></pre>

<p><code>$ rails routes</code> te servira beaucoup, notamment pour récupérer le prefix de tes routes.</p>

<p>Les routes dynamiques peuvent être faites en ajoutant une variable dans la route avec un <code>:</code>, par exemple :</p>
<pre><code class="language-ruby">get '/users/:id', to: 'controller#method'</code></pre>
<p>Au final, une route dynamique contient de l'information (la variable) que tu peux récupérer ensuite dans le controller via le hash <code>params</code>. Dans l'exemple ci-dessus, si on tape l'URL "/users/123" on aurait <code>params[:id]</code> qui serait égal à <code>"123"</code>.</p>


<h2>5. Pour aller plus loin</h2>
<p>Sans surprise, la <a href="https://guides.rubyonrails.org/routing.html>doc</a> a encore prévu le coup, avec une belle ressource sur les routes. Demain nous verrons en détails l'utilisation de la commande <code>resources</code> dans les routes, mais tu peux y jeter un œil héhé.</p>

<p>Après, j'imagine que tu dois te dire que ton cerveau va exploser, que tu es loin d'être autonome : si je te demandais de refaire toutes les routes d'un gros site comme The Hacking Project, tu ferais un joli "lol nope". C'est normal, il te manque une info importante que l'on verra demain : quelles sont les bonnes pratiques pour faire des routes propres "The Rails Way™ ". Patience, on va y venir.</p>


          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #5E66E5 " >
          <h1>Cours : Liens, façon Rails</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          
<h2>1. Introduction</h2>
<p>Je me souviens que dans ma jeunesse, je ne comprenais rien au système de liens de Rails, et je me retrouvais à faire des hérésies avec lesquelles je me serais fait jeter immédiatement de tout test technique à l'embauche. Mais grâce à cette ressource, tu vas apprendre à lier facilement et proprement les pages de ton appli.</p>

<p>Sur les sites web statiques, c'est très facile de créer un lien hypertexte, il suffit de mettre la balise HTML <code>a</code> et son <code>href</code> en mode <code>&lt;a href="/dossier/sous_dossier/page.html">clique ici !&lt;/a></code>. Sauf que pour Rails, ça n'est pas très propre, et ça ne marche pas du tout si la route vers laquelle tu veux pointer est dynamique. <a href="https://www.youtube.com/watch?v=hSpQkbcw0TE" target="_blank">C'est non</a>.</p>

<p>Rails a un super helper pour les liens : <code>link_to</code> et un super moyen d'éviter d'écrire des URL dans tes liens : le <code>_path</code>.</p>


<h2>2. Historique</h2>
<p>Le fonctionnement des liens, que nous allons te présenter, est en place depuis la toute première version de Rails.</p>

<h2>3. La ressource</h2>
<h3>3.1. Le helper</h3>
<p>Un helper est une méthode spécifique à Rails qui va t'aider d'une façon où d'une autre. Ici, le helper <code>link_to</code> est une méthode que tu vas pouvoir mettre dans une view sous le format :</p>
<pre><code class="language-ruby">&lt;%= link_to "clique ici", le_fameux_path %></code></pre>
<p>Quand il va la lire, elle va se transformer ainsi avant d'être envoyée au navigateur :</p>
<pre><code class="language-html">&lt;a href="url_liée_au_path_saisi_dans_ton_link_to">clique ici&lt;/a></code></pre>
<p>En résumé, le helper <code>link_to</code> génère une balise HTML <code>a</code> avec le bon url en <code>href</code> pour peu que tu lui donnes le bon path à suivre.</p>
<h3>3.2. Le path ?</h3>
<p>C'est LA partie qui porte à confusion (car il n'existe pas de ressource sur le web à ce sujet, et je te mets au défi d'en trouver une convenable). Le path, c'est un raccourci dont Rails dispo pour identifier une des URL de tes routes (listées dans <code>routes.rb</code>) et tu peux le construire en prenant le prefix de la route auquel tu rajoutes "<code>_path</code>". Voilà. Bisous, de rien.</p>

<p>En gros si ton <code>$ rails routes</code> ressemble à ceci : </p>
<pre><code class="language-shell">➜  yolo_test git:(master) ✗ rails routes
                   Prefix Verb URI Pattern                                                                              Controller#Action
                     root GET  /                                                                                        controller#index
        static_pages_home GET  /static_pages/home(.:format)                                                             static_pages#home
     static_pages_contact GET  /static_pages/contact(.:format)                                                          static_pages#contact</code></pre>

<p>Et bien pour avoir le path de la route qui va à <code>/static_pages/home</code>, tu prends son préfix (<code>static_pages_home</code>) et tu ajoutes <code>_path</code> : ce sera donc<code>static_pages_home_path</code>. <br>
Idem pour la route <code>root</code> : ce sera <code>root_path</code>.</p>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🚀 ALERTE BONNE ASTUCE</h4>
      <p class="card-text">Généralement, le prefix est proposé automatiquement par Rails. Toutefois, il est possible de le définir à la main, en rajoutant sur la route <code>as: ton_nouveau_prefix</code>. Par exemple comme ceci : </p>
      <pre><code class="language-ruby">get 'politique-de-confidentialite', to: 'home#privacy_policy', as: 'privacy_policy'</code></pre>
      <p>Dans ce super exemple, ça permet d'avoir une URL en "www.thegossipproject.com/politique-de-confidentialite" mais d'avoir dans ton code un path en anglais : <code>privacy_policy_path</code>. <br>
      Après, je te donne cette astuce ici, mais sache que ce n'est pas une bonne pratique d'utiliser le <code>as:</code>, et l'on préférera s'en tenir aux conventions pour les noms de path, plutôt que de partir sur des noms customs.</p>
    </div>
  </div>
</div>


<h3>3.3. Cas des URLs dynamiques</h3>
<p>Pour les URLs dynamiques, le path ne suffit pas. Par exemple tu as la route suivante qui a 3 variables dans son URL :</p>
<pre><code class="language-shell">                   Prefix Verb URI Pattern                                                                              Controller#Action
                     root GET  /                                                                                        controller#index
           year_month_day GET  /years/:year_id/months/:month_id/days/:id(.:format)                                      days#show</code></pre>

<p>Si je me contente de mettre <code>year_month_day_path</code> dans un <code>link_to</code>, comment celui-ci peut savoir quelle variable appeler à chaque fois à la place de <code>year_id</code>, <code>month_id</code>, et de <code>id</code> (de jour) ? <br>
Il n'y a pas le choix : il faut passer en argument les trois valeurs que doivent prendre les trois variables de l'URL, dans l'ordre de leur apparition dans l'URL. Ainsi, on aura un path qui ressemblera à :</p>

<pre><code class="language-ruby">year_month_day_path(@year.id, @month.id, @day.id)</code></pre>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🤓 QUESTION RÉCURRENTE</h4>
      <p class="card-text"><b>Mais dis donc Jamy, ok pour les URLs dynamiques mais les URLs statiques ? On doit vraiment se taper un <code>link_to</code> ?</b><br>
      C'est préférable. Après, tu peux aussi, dans certains cas, te rabattre sur un <code>&lt;a href="<%=mettre_ton_path%>">clique ici&lt;/a></code> sachant que <code><%=mettre_ton_path%></code> sera remplacé par la bonne URL par le serveur.</p>
      <p>Le point sur lequel il ne faut pas transiger par contre, c'est qu'<b>on écrit jamais d'URL en dur dans le code d'une application Rails : il faut toujours passer par le path</b>. Pourquoi ?</p>
      <ul>
        <li>C'est la convention donc c'est ce à quoi s'attendront les devs Ruby seniors (et toi aussi d'ici quelque temps) ;</li>
        <li>C'est plus facile à écrire donc y a moins de risque de typo ;</li>
        <li>C'est plus court à lire, donc plus facile à la relecture ;</li>
        <li>Si d'aventure tu devais changer tes URLs, tu pourrais facilement le faire tout en gardant le même path.</li>
      </ul>
    </div>
  </div>
</div>

<h2>4. Points importants à retenir</h2>
<p>Pour faire des liens dans rails, il faut utiliser <code>&lt;%= link_to "clique ici", ton_path %></code>.</p>
<p> Le path est le prefix (obtenu avec <code>$ rails routes</code>) auquel tu ajoutes <code>_path</code>.</p>
<p> Pour pointer vers des URLs dynamiques, passe les paramètres dynamiques dans ton path. <code>year_month_day_path(@year.id, @month.id, @day.id)</code> pointera vers l'URL : <code>/years/:year_id/months/:month_id/days/:id</code></p>


<h2>5. Pour aller plus loin</h2>
<p>Tu peux vérifier la doc complète de <code>link_to</code>, disponible sur <a href="https://api.rubyonrails.org/v5.2.2/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to" target="_blank">ce lien</a>.</p>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>


  <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #FF4081 " >
          <h1>Projet : The Gossip Project, les premières views</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          <p>Note : le projet est à faire en pair-programming.</p>

<h2>1. Introduction</h2>
<p>Bienvenue dans ta première application Rails qui déchire ! Aujourd'hui tu vas commencer un projet qui te prendra toute la semaine : The Gossip Project. Nous allons te demander de reprendre le backend de la semaine dernière (en modifiant quelques éléments), puis tu vas ajouter les bons controllers, les bonnes vues, pour qu'à la fin de la semaine vous puissiez commérer en toute tranquilité.</p>

<p>Voici le programme de la semaine :</p>

<ul>
  <li>Aujourd'hui sera consacré aux première pages de l'application : quelques pages statiques et les pages potins</li>
  <li>Demain sera consacré à la création d'un potin</li>
  <li>Mercredi sera consacré au CRUD complet des potins</li>
  <li>Jeudi sera consacré aux commentaires des potins, aux likes des potins, et à la gestion d'utilisateurs</li>
  <li>Vendredi sera consacré à l'identification des potins</li>
</ul>

<p>Ce programme consiste en gros à te faire ajouter les controllers et les vues aux models solides que tu as codés la semaine dernière. Comment ajouter du front aux bases de données. Puis la semaine prochaine nous verrons les techniques avancées, comme l'envoi d'email, la gestion des photos de profil, la gestion du front, afin que tu ressortes de ces trois semaines de Rails avec un rendu professionnel.</p>

<h2>2. Le projet</h2>
<p>Nous allons commencer aujourd'hui par créer les premières pages :</p>
<ul>
  <li>La page d'accueil, bien entendu. Cette page d'accueil affichera tous les potins créés</li>
  <li>La page qui présente l'équipe de The Gossip Project, aka toi et ton binome</li>
  <li>La page de contact où tu vas balancer une superbe adresse de contact</li>
  <li>Une page de bienvenue, qui accueille l'utilisateur en fonction du nom passé dans l'URL</li>
</ul>

<p>Dans la page d'accueil, il sera possible de cliquer sur chaque potin pour en "Voir plus", ce qui aura pour effet d'aller sur la page du potin.</p>

<p>Enfin, puisque c'est toi, nous allons mettre du CSS dans le site, grâce notamment à Bootstrap.</p>

<h3>2.1. Les bases de l'application : installation et models</h3>
<p>Ce projet te suivra tout au long de cette semaine, mais nous allons te demander de ne pas perdre le rythme des migrations. Ainsi, nous allons te demander de créer une nouvelle application <code>the-gossip-project</code> (avec PostgreSQL), puis d'importer les migrations, models, et seed de l'ancien exercice. Cela permettra de te replonger en douceur dans le bain des bases de données sans te faire perdre trop de temps.</p>

<p>Comme les tests seront de la partie, il te faudra bien entendu ajouter les gems concernées pour avoir des jolis tests. D'ailleurs, fais deux tests sur chaque model.</p>


<h3>2.2. Les premières pages : présentation et contact</h3>
<p>Tu vas devoir créer deux pages :</p>
<ul>
  <li>Une page <code>team</code>, qui présente l'équipe. Elle sera sur l'uri <code>/team</code></li>
  <li>Une page <code>contact</code>, qui dit comment contacter l'équipe. Elle sera sur l'uri <code>/contact</code></li>
</ul>

<p>Écris un truc simple dans la page, du genre : "voici notre équipe lol mdr 😇❤️😻" pour team par exemple.</p>


<h3>2.3. Un peu de mise en forme SVP merci</h3>
<h4>2.3.1. Du CSS</h4>
<p>Histoire de ne pas être trop pouilleux, nous allons te demander d'ajouter du CSS. Comment ajouter du CSS vous me dites ? Simple, va dans <code>app/assets/stylesheets/application.css</code>. Puis écris ton CSS en bas du document. Ce CSS concernera toute ton application.</p>

<p>On va rajouter un peu de css à cette app, en y mettant Bootstrap. La technique la plus simple et la plus réputée consiste à utiliser le CDN, et coller la ou les lignes de CDN dans le head de ton fichier <code>app/views/layout/application.html.erb</code>.</p>


<h4>2.3.2. Un header</h4>
<p>Ajoute un <a href="https://getbootstrap.com/docs/4.0/components/navbar/" target="_blank">header</a> dans toutes les pages de ton application. Celui que tu veux.</p>

<h4>2.3.3. Des liens</h4>
<p>Maintenant, dans le header, mets-y les lien pour les pages <code>team</code> et <code>contact</code>.</p>


<h3>2.4. URL cachée, la bienvenue ;)</h3>
<p>Cette partie sera un chouilla plus tricky, puisqu'elle te demandera de jouer avec les fameux params. Tu as entendu parler du principe des "Landing Pages", un truc cool avec une page adaptée à la cible potentielle qui viendrait sur ton application. Nous allons donc faire cela.</p>

<p>En gros ce serait une page qui aurait une url du genre <code>welcome/first_name</code>, et quand la personne irait sur cette page, cette personne serait accueillie par un truc du genre :</p>

<p>BIENVENUE <i>first_name</i> ! Ici c'est notre super site de potins, il est chouette, non ?</p>

<h3>2.5. Page d'accueil : la liste des potins</h3>
<p>La page d'accueil doit souhaiter la bienvenue au visiteur, puis afficher les potins que l'on a en base, en n'affichant que leur <code>author.first_name</code>, et leur <code>title</code>. Évidemment, un lien vers la page d'accueil doit être mis dans le header de l'application.</p>

<h3>2.6. Afficher un potin</h3>
<p>Allez, dernier élément : la page qui affiche les potins. Chaque potin en base doit avoir une page dédiée, qui affiche les détails de son auteur (avec un lien pour aller sur la page de l'auteur), son <code>title</code>, son <code>content</code>, puis la date de création.</p>

<p>Enfin, sur la page d'accueil qui montre tous les potins, nous pourrons trouver pour chaque potin affiché le lien pour sa page.</p>

<h3>2.7. Afficher un utilisateur</h3>
<p>Sur chaque page potin, nous avons un lien pour afficher la page profil de son utilisateur. La page profil devra afficher les informations importantes de l'utilisateur.</p>

<h3>2.8. Un plus joli display</h3>
<p>Pour la page d'accueil, ce serait quand même plus sympa d'avoir les potins dans des <a href="https://getbootstrap.com/docs/4.1/components/card/" target="_blank">cards</a> bootstrap, non ? Puis n'hésite pas à regarder si tu vois d'autres éléments sympas à ajouter dans ton application 😉</p>



<h2>3. Rendu attendu</h2>
<p>Une application <code>the_gossip_project</code> qui affiche quelques pages statiques, un système de landing pages personnalisées, un index et un show de potins. Le tout avec Bootstrap et un header qui a les bons liens.</p>

          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>



</div>


  </div>
</div>
    <script src="/packs/dashboard-031178fac0de4f91cbcc.js"></script>
    

    <script charset="utf-8">
      $('input[name=authenticity_token]').val($('meta[name=csrf-token]').attr('content'));
    </script>

  </body>
</html>

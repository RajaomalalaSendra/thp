<!DOCTYPE html>
<html class="loading" lang="fr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/thp/style/bootstrap.css">
    <title>The hacking project offline</title>
  </head>
  <body class="vertical-layout vertical-menu 2-columns  menu-expanded fixed-navbar" data-open="click" data-menu="vertical-menu" data-color="bg-gradient-x-primary-blue" data-col="2-columns">
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <h1 class="navbar-brand">THE HACKING PROJECT</h1>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarColor01">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="/thp">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/thp/features">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/thp/about">About</a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search">
            <button class="btn btn-secondary my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
      </nav>
<a type="button" class="btn btn-primary" href="/thp/semaine_2/">Semaine 2</a>

<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="content-header row"></div>
    
      <div class="container">
    <div class="card">
  <div class="card-header">
    <h4 class="text-center"> Programme jour par jour</h4>
  </div>
  <div class="card-body">
    <div class="text-center">
    <a href="/thp/semaine_1">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
        <i class="fa fa-terminal"></i>&nbsp;&nbsp;&nbsp;Lun
      </button>
</a>    <a href="/thp/semaine_1/jour_2">
      <button class="btn btn-secondary btn-outline-dark btn-lg mr-4">
        <i class="fa fa-code"></i>&nbsp;&nbsp;&nbsp;Mar
      </button>
</a>    <a href="/thp/semaine_1/jour_3">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
        <i class="fa fa-desktop"></i>&nbsp;&nbsp;&nbsp;Mer
      </button>
</a>    <a href="/thp/semaine_1/jour_4">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
      <i class="fa fa-folder-open"></i>&nbsp;&nbsp;&nbsp;Jeu
      </button>
</a>    <a href="/thp/semaine_1/jour_5">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
      <i class="fa fa-bullhorn"></i>&nbsp;&nbsp;&nbsp;Ven
      </button>
</a>    </div>
  </div>
</div>

<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="content-header row"></div>
    
      
<div class="content-body">
      <h2 class="text-center">Découverte de SQL</h2>
      <h4 class="text-center">Initiation à Rails</h4>
  <div class="row">
     <div class="col-xl-3 col-lg-6 col-md-12">
  <div class="card">
    <div class="card-content">
      <div class="card-body">
        <div class="media d-flex">
          <div class="align-self-top">
              <i class="ft-calendar icon-opacity info font-large-4"></i>
          </div>
          <div class="media-body text-right align-self-bottom mt-3">
              <span class="d-block mb-1 font-medium-1"></span>
              <h3 class="info mb-0">
                 Jour 24 / 55</h3>
          </div>
        </div>
        <div class="progress progress-sm mt-1 mb-0 box-shadow-2">
            <div class="progress-bar bg-gradient-x-info" role="progressbar" style="width: 43%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="120">
            </div>
        </div>
      </div>
    </div>
  </div>
 </div>


    <div class="col-xl-3 col-lg-6 col-md-12">
  <div class="card">
    <div class="card-content">
      <div class="card-body">
        <div class="media d-flex">
          <div class="align-self-top">
            <i class="ft-heart icon-opacity danger font-large-4"></i>
          </div>
          <div class="media-body text-right align-self-bottom mt-3">
            <span class="d-block mb-1 font-medium-1">Jokers restant</span>
            <h3 class="danger mb-0">
                3
            </h3>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

    <div class="col-xl-3 col-lg-6 col-md-12">
    <div class="card">
        <div class="card-content">
            <div class="card-body">
                <div class="media d-flex">
                    <div class="align-self-top">
                        <a href="/dashboard/assignments?locale=fr">
                           <i class="ft-fast-forward icon-opacity warning font-large-4"></i>
</a>                    </div>
                    <div class="media-body text-right align-self-bottom mt-3">
                        <span class="d-block mb-1 font-medium-1">Missions</span>
                            <div class="badge border-danger danger badge-border">Pas inscrit</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

  </div>
  <div class="row">
        <div class="container">
    <div class="col-xl-12 col-lg-12 col-md-12">
    <div class="card">
        <div class="card-header">
        <h1 >Initiation à Rails
                <i class="fa fa-beer text-warning"></i>
        </h1>
        
        </div>
        <div class="card-content">
        <div class="card-body">
            <div class="card-text">
            <h2 class="text-center">Découverte de SQL</h2>
            <div class="cd-horizontal-timeline loaded">
                <div class="timeline">
                <div class="events-wrapper">
                    <div class="events" style="width: 1800px;">
                    <ol>
                                <li>
                                    <a style="left:120px;" href="/dashboard/weeks/4/days/1?locale=fr">
                                        Lun
                                            <i class="fa fa-beer text-warning" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Rendez-vous pour boire un coup"></i>

</a>                                </li>
                            <li>
                                <a class="selected" style="left:240px;" data-toggle="tooltip" data-placement="top" title="Découverte de SQL" href="/dashboard/weeks/4/days/2?locale=fr">
                                    Mar
                                        <i class="fa fa-beer text-warning" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Rendez-vous pour boire un coup"></i>

</a>                                </li>
                                <li>
                                    <a style="left:360px;" href="/dashboard/weeks/4/days/3?locale=fr">
                                        Mer
                                            <i class="fa fa-rocket text-danger" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Projet à rendre ce jour-là"></i>

</a>                                </li>
                                <li>
                                    <a style="left:480px;" href="/dashboard/weeks/4/days/4?locale=fr">
                                        Jeu
                                            <i class="fa fa-rocket text-danger" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Projet à rendre ce jour-là"></i>
    <i class="fa fa-pencil text-success" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Corrections cette journée là" ></i>

</a>                                </li>
                                <li>
                                    <a style="left:600px;" href="/dashboard/weeks/4/days/5?locale=fr">
                                        Ven
                                            <i class="fa fa-pencil text-success" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Corrections cette journée là" ></i>


</a>                                </li>
                    </ol>
                </div>
                </div>
            </div>
            </div>
        </div>
        </div>
    </div>
    </div>
<div>
  </div>

  <!-- Les fameuses corrections qui n'arrivnet que les jours concernés -->


    <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #5E66E5 " >
          <h1>Cours : SQL pour débutants</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          <h2>1. Introduction</h2>
<p>Quand tu crées des applications web, il est indispensable de stocker les données (utilisateurs, potins, etc.) quelque part. Dans cette ressource nous allons t'apprendre comment fonctionnent les bases de données avant de voir pourquoi et comment lier des tables (morceaux de bases de données) entre elles. À l'avenir, nous nous focaliserons uniquement sur SQL quand il s'agira de bases de données : c'est LE langage de référence pour leur gestion.</p>

<p>Après quelques démonstrations du fonctionnement de SQL, tu devrais :</p>

<ul>
  <li>Savoir comment marche une base de données, un élément que tu retrouveras dans TOUTE application web ;</li>
  <li>Avoir un aperçu du quotidien d'un Data Scientist, un métier très hype en ce moment où on passe ses journées à miner dans des BDD.</li>
</ul>

<p>BDD, à toi de jouer !</p>

<h2>2. Historique</h2>
<p>Très rapidement dans l'informatique, nous eûmes besoin de stocker les informations, traitées par nos programmes, quelque part : ainsi furent créées les bases de données. En 1970, un certain Edgar Codd, ingénieur chez IBM, a inventé un moyen de lier en base des tables entre elles. Ainsi, une entrée, comme un <code>Gossip</code>, pourrait être lié à une autre entrée, par exemple en le faisant appartenir à un <code>User</code>. Ce modèle de base de données relationnelle a révolutionné l'informatique puisqu'aujourd'hui, il reste le format le plus répandu dans les applications.</p>

<p>Au début des années 70, deux ingénieurs chez IBM nommées Donald Chamberlin et Raymond Boyce, grâce aux travaux de "Ted" Codd ont inventé un langage pour créer, modifier et lire une base de donnée relationnelle : le SQL ou Structured Query Language. Leur invention est devenue tout aussi importante que celle de Mr Codd dans le monde de l'informatique : aujourd'hui le SQL est le langage de gestion de données le plus utilisé sur notre petite planète.</p>

<h2>3. La ressource</h2>

<h3>3.1. Introduction aux bases de données</h3>
<h4>3.1.1. Un gros classeur Excel</h4>
<p>Les projets de la semaine passée t'ont montré que stocker tous les objets liés à notre application dans un fichier CSV, c'est fonctionnel mais pas toujours très pratique. En effet, supprimer une entrée n'est pas simple, chercher un élément donné peut être long et encore, tu n'as pas testé avec des milliers de lignes… <br>
Nous allons donc commencer à utiliser les VRAIES bases de données pour nos applications. Pour te faire un avis, regarde <a href="https://www.youtube.com/watch?v=wR0jg0eQsZA" target="_blank">cette vidéo</a> de LucidChart où ils expliquent le concept des bases de données. (Ils parlent même des ERD (Entity–Relationship Diagram) qui permettent de les dessiner ; on verra plus bas quelques outils à ce sujet). Ensuite, je t'invite à regarder cette <a href="https://www.youtube.com/watch?v=IXycPq7MnwE" target="_blank">vidéo de Khan Academy</a> qui explique les bases de données.</p>

<p>Comme tu l'as compris, une base de données permet de stocker facilement de la donnée et d'y avoir accès. On peut se représenter une base de données comme <b>un ensemble de gros tableurs Excel, avec des lignes et des colonnes, qu'on appellerait des tables</b>.</p>

<p>Voici un exemple d'une table d'utilisateurs (<code>users</code>) :</p>
<div class="table-responsive">
<table class="table">
  <thead>
  <tr>
    <th>id</th>
    <th>first_name</th>
    <th>last_name</th>
    <th>age</th>
    <th>city</th>
  </tr>
  </thead>
  <tr>
    <th>1</th>
    <th>Martin</th>
    <th>Dupond</th>
    <th>27</th>
    <th>Paris</th>
  </tr>
  <tr>
    <th>2</th>
     <th>Jack</th>
     <th>Quilley</th>
     <th>38</th>
     <th>London</th>
   </tr>
     <tr>
      <th>3</th>
     <th>Vittorio</th>
     <th>Piccolini</th>
     <th>18</th>
     <th>Milan</th>
   </tr>
</table>
</div>

<p>Tu remarqueras que la première colonne est un peu étonnante : elle s'appelle "id". Son rôle est d'ordonner les éléments de la BDD et de facilement y faire référence : <b>l'id est un identifiant unique associé à chaque entrée dans la table</b>.</p>



<h4>3.1.2. La base de données relationnelle</h4>
<p>Prenons l'exemple d'une base de données contenant une table de professeurs. Chaque professeur a des attributs comme un nom, un téléphone, etc. Mais on aimerait aussi que notre professeur donne des cours. Chaque cours aura une heure de début, un nom, etc. Plutôt que de faire une gigantesque table contenant chaque professeur et ses cours, il est plus simple d'avoir deux tables distinctes : une pour les profs (nommée <code>teachers</code>) et une pour les cours (nommée <code>classes</code>). Ensuite, pour savoir quel professeur donne quel cours, ça serait top de pouvoir lier les tables entre elles comme le schéma ci-dessous :</p>

<img src="https://i.imgur.com/Am57ajH.png" class="img-fluid">

<p>En y regardant de plus près, nous n'aurons pas pu mettre toutes ces informations dans une seule table car chaque professeur peut avoir N cours. Parfois il en a un seul (N=1), parfois aucun (N=0), parfois dix (N=10). Il est donc impossible de mettre toutes les informations d'un professeur sur une seule ligne de la table <code>teachers</code> car on ne connaît pas le nombre de colonnes nécessaires (vu qu'il n'y a pas de nombre maximum de cours qu'un prof peut avoir).</p>
<p>Au final, c'est un cas qu'on rencontre couramment quand on fait face à des BDD complexes : on doit créer des tables et les lier entre elles. C'est ce que l'on appelle les <b>bases de données relationnelles</b>. <br>
Dans <a href="https://www.youtube.com/watch?v=h8IWmmxIyS0" target="_blank">cette vidéo</a> de O'Reilly, tu pourras comprendre ce qu'est qu'une base de données relationnelle.</p>

<p>Il existe trois types de relations entre bases de données :</p>

<ul>
  <li><b>Relation 1-1</b> : Assez rare, elle sert à modéliser l'exclusivité. Par exemple : dans une hypothétique base de données "session THP en cours", un moussaillon a un unique ordinateur et chaque ordinateur appartient à un moussaillon. Bref, c'est du 1-1 entre 2 tables <code>cabin_boys</code> et <code>computers</code>.</li>
  <li><b>Relation 1-N</b> : Très courante, elle sert à modéliser une appartenance. Par exemple : dans une hypothétique base de données "France", chaque habitant vit dans une ville unique mais chaque ville a plusieurs habitants. C'est du 1-N entre la table <code>cities</code> et la table <code>people</code>.</li>
  <li><b>Relation N-N</b> : Très courante aussi, elle permet de modéliser un lien mais sans aucune unicité. Par exemple : un docteur a plusieurs patients et un patient peut avoir plusieurs docteurs. C'est du N-N entre la table <code>doctors</code> et la table <code>patients</code>.</li>
</ul>

<h4>3.1.3. Penser une base de données</h4>
<p>Avant de foncer tête baissée dans le codage d'une BDD, il est important de bien la modéliser pour voir les différents éléments qui vont la composer. Sans une vision globale et un dessin de ta BDD entière, <b>tu vas forcément oublier quelque chose</b> et t'en mordre les doigts plus tard. <br>
Voici les 3 éléments que tu vas devoir lister pour modéliser ta BDD à tête reposée :</p>

<ul>
  <li>Les <b>tables</b> : ce sont les tableaux qui composeront ta base de données. C'est ce qui demande le plus de réflexion mais qui t'aidera à poser des concepts concrets sur des thèmes abstraits. Tu verras plus tard qu'au final, une table (SQL) et un objet (Ruby) sont très liés... Exemples de tables : <code>users</code>, <code>orders</code>, <code>cities</code>, <code>articles</code>, etc.</li>
  <li>Les <b>relations entre tables</b> : il vous faut établir quelles tables sont liées entre elles et via quelle relation (1-1, 1-N et N-N). En général, cette réflexion vient en même temps que celles où on détermine les tables. Par exemple : relation 1-N entre <code>users</code> et <code>cities</code> (un utilisateur vit dans une ville, une ville peut être lié à plusieurs utilisateurs), relation N-N entre <code>users</code> et les <code>items</code> (un utilisateur peut acheter plusieurs articles et chaque article peut avoir été acheté par plusieurs utilisateurs), etc. </li>
  <li>Les <b>attributs de chaque table</b> : ce sont en gros les colonnes qui définissent chaque entrée d'une table. Par exemple, dans une table <code>users</code> on aura : <code>first_name</code>, <code>gender</code>, <code>email</code>, <code>phone</code> etc.</li>
</ul>

<p>Cette phase de réflexion doit être menée en équipe et sans ordinateur. Plusieurs choix :</p>

<ul>
  <li>Sur un tableau blanc, éventuellement à l'aide de post-its ;</li>
  <li>En faisant un gros diagramme sur une feuille A4 avec un bon vieux stylo ;</li>
  <li>N'hésite pas à utiliser un logiciel d'ERD pour t'aider. Voici une liste :
  <ul>
    <li><a href="https://www.lucidchart.com" target="_blank">LucidChart</a></li>
    <li><a href="https://online.visual-paradigm.com/fr/" target="_blank">VisualParadigm Online</a></li>
  </ul></li>
</ul>

<p>Entraîne-toi ! Imagine des idées de startup puis fais un diagramme via un ERD.</p>



<h3>3.2. SQL</h3>

<h4>3.2.1. Découverte de SQL</h4>

<p>Afin d'interagir avec la base de données, nous allons utiliser le langage SQL ou "Structured Query Language" qui permet facilement d'en récupérer les informations. <br>
Pour créer notre première base de données sur notre machine, nous allons utiliser <code>SQLite3</code>. Pour l'installer :</p>

<ul>
  <li>Sur Ubuntu, fait :</li>
  <pre><code class="language-shell">$ sudo apt-get install sqlite libsqlite3-dev</code></pre>
  <li>Sur macOS, fait :</li>
  <pre><code class="language-shell">$ brew install sqlite</code></pre>
</ul>

<p>Une fois le logiciel installé, crée un dossier de test, va dedans et rentre : </p>

<pre><code class="language-shell">$ sqlite3 db.sqlite</code></pre>

<p>Cela va créer un fichier nommé <code>db.sqlite</code> qui est ta base de données (⚠️ le fichier ne sera sauvegardé que lorsqu'une table sera créée dedans). Au passage, cela te fait rentrer dans l'interface SQLite3 depuis laquelle tu vas pouvoir passer des commandes SQL sur la BDD. <br>
Pro-tip : Pour sortir de SQLite3, le raccourci est <code>ctrl</code>-<code>D</code> et non <code>ctrl</code>-<code>C</code>.</p>

<p>Pour créer ta première table, voilà la syntaxe à saisir dans l'interface SQLite3 :</p>

<pre><code class="language-sql">CREATE TABLE `doctors` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` TEXT,
`age` INTEGER,
`specialty` TEXT
);</code></pre>

<p>Cette commande va créer une table <code>doctors</code>, avec son fameux <code>id</code> et les valeurs <code>name</code> (un nom sous forme de texte), <code>age</code> (un âge sous forme d'entier) et <code>specialty</code> (une spécialité sous forme de texte).<br>
Avec la commande <code>AUTOINCREMENT</code>, on laisse la base de données s'occuper de l'incrémentation automatique de l'id : à chaque fois qu'une entrée sera créée dans la table <code>doctors</code>, elle portera un nouvel <code>id</code> (égal au dernier <code>id</code> + 1). </p>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🚀 ALERTE BONNE ASTUCE</h4>
      <p class="card-text">Les commandes suivantes permettront de visualiser plus facilement le contenu de ta table quand tu taperas la commande <code>SELECT * FROM doctors</code>. Saisis-les une fois dans l'interface de SQlite3 : </p>
<pre><code class="language-shell">.mode column
.header on</code></pre>
      <p>La commande suivante permet de lister toutes les tables qui ont déjà été créées dans ton fichier de base de données.</p>
      <pre><code class="language-shell">.tables</code></pre>

    </div>
  </div>
</div>

<h4>3.2.2. Faire du CRUD en SQL</h4>
<p>Qu'est-ce que le CRUD ? Ce sont les 4 grandes actions qu'on voudra effectuer sur les entrées d'une BDD :</p>
<ul>
  <li>Create : créer une nouvelle entrée dans une table. Il faut utiliser la commande <code>INSERT</code> ;</li>
  <li>Read : lire les entrées d'une table. Il faut utiliser la commande <code>SELECT</code> ;</li>
  <li>Update : mettre à jour une entrée d'une table. Il faut utiliser la commande <code>UPDATE</code> ;</li>
  <li>Delete : supprimer une entrée. Il faut utiliser la commande <code>DELETE</code>.</li>
</ul>
<p>Ci-dessous, quelques exemples concrets.</p>
<p>Pour créer un docteur dans notre base de données il suffit d'écrire :</p>
<pre><code class="language-sql">INSERT INTO doctors (name, age, specialty) VALUES ('Dr. Dolladille', 45, 'Dentist');</code></pre>

<p>Pour lire l'ensemble des éléments de la table <code>doctors</code> (comme on l'a vu ci-dessus) la commande est : </p>
<pre><code class="language-sql">SELECT * FROM doctors;</code></pre>

<p>Si on veut sélectionner un élément en particulier on peut écrire :</p>
<pre><code class="language-sql">SELECT * FROM doctors WHERE age = 45;</code></pre>

<p>Pour mettre à jour un paramètre, la commande est la suivante :</p>
<pre><code class="language-sql">UPDATE doctors SET age = 40, name = 'John Smith' WHERE id = 3;</code></pre>

<p>Et enfin pour supprimer un élément :</p>
<pre><code class="language-sql">DELETE FROM doctors WHERE id= 3;</code></pre>

<h4>3.2.3. Les tables jointes</h4>
<p>Nous t'avons présenté la logique des BDD relationnelles. Quand deux tables sont liées par une relation (par exemple 1-N), on parle alors de <b>tables jointes ("join tables" en anglais)</b>. Illustrons cela en imaginant deux tables :</p>

<p>La table <code>cities</code>:</p>
<div class="table-responsive">
<table class="table">
  <thead>
  <tr>
    <th>id</th>
    <th>name</th>
  </tr>
</thead>
  <tr>
    <th>1</th>
    <th>Paris</th>
  </tr>
   <tr>
    <th>2</th>
    <th>London</th>
  </tr>
   <tr>
    <th>3</th>
    <th>Washington D.C.</th>
  </tr>
   <tr>
    <th>4</th>
    <th>Rome</th>
  </tr>
</table>
</div>


<p>Et la table <code>inhabitants</code>:</p>
<div class="table-responsive">
<table class="table">
  <thead>
  <tr>
  <th>id</th>
  <th>city_id</th>
  <th>first_name</th>
  <th>last_name</th>
  <th>age</th>
</tr>
</thead>
  <tr>
  <th>1</th>
  <th>3</th>
  <th>Donald</th>
  <th>Trump</th>
  <th>71</th>
  </tr>
  <tr>
  <th>2</th>
  <th>4</th>
  <th>Matteo</th>
  <th>Renzi</th>
  <th>43</th>
  </tr>
  <tr>
  <th>3</th>
  <th>1</th>
  <th>Emmanuel</th>
  <th>Macron</th>
  <th>40</th>
  </tr>
  <tr>
  <th>4</th>
  <th>2</th>
  <th>Theresa</th>
  <th>May</th>
  <th>61</th>
  </tr>
</table>
</div>

<p>On peut voir immédiatement que ces deux tables sont liées puisque dans la table <code>inhabitants</code>, j'ai deux clés uniques :</p>
<ul>
  <li> La clé <code>id</code>, aussi appelée clé primaire ou primary key.</li>
  <li> La clé <code>city_id</code>, aussi appelée clé étrangère ou foreign key.</li>
</ul>

<p>C'est la clé étrangère qui permet la liaison entre les deux bases de données. Ainsi, on voit que dans la table <code>inhabitants</code>, l'entrée "Donald Trump" a un attribut <code>city_id = 3</code> : cette entrée est donc liée à l'entrée portant l'<code>id = 3</code> dans la table <code>cities</code>. Au final, on a juste indiqué ici que Donald Trump habitait Washington DC.</p>

<p>La force de la relation est qu'il est possible de faire une requête SQL qui me retourne les entrées de la table <code>inhabitants</code> selon un critère de la table <code>cities</code>. Par exemple, pour récupérer les habitants de Paris, il suffit d'écrire :</p>

<pre><code class="language-sql">SELECT * FROM inhabitants
JOIN cities ON cities.id = inhabitants.city_id
WHERE cities.name = 'Paris';</code></pre>

<p>Ici j'ai dit de joindre la table cities tel que l'id que je trouve dans la table cities (<code>cities.id</code>) est le même que le city_id qui se trouve dans la table inhabitants (identifié par <code>inhabitants.city_id</code>).</p>

<h4>3.2.4. Plus d'infos sur les relations N-N</h4>
<p>Les relations les plus complexes sont les relations N-N. Pour mieux les comprendre voici quelques articles intéressants :
</p> 
<ul>
  <li>https://www.techiediaries.com/sqlite-create-table-foreign-key-relationships/</li>
  <li>http://cerig.pagora.grenoble-inp.fr/tutoriel/bases-de-donnees/chap06.htm</li>
</ul>


<h2>4. Points importants à retenir</h2>
<p>Les bases de données relationnelles sont la base de la majorité des applications. Pour concevoir une BDD relationnelle, SQL est le langage de prédilection.</p>
<p>Avant de coder une BDD, il faut se poser pour établir toutes les tables, les relations entre elles et leurs attributs.</p>
<p>Voici une sélection de commandes classiques en SQL :</p>

<ul>
  <li>Créer une table :</li>
<pre><code class="language-sql">CREATE TABLE `doctors` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` TEXT,
`age` INTEGER,
`specialty` TEXT
);</code></pre>

  <li>Créer une entrée dans une table :</li>
<pre><code class="language-sql">INSERT INTO doctors (name, age, specialty) VALUES ('Dr. Dolladille', 45, 'Dentist');</code></pre>

  <li>Lire des éléments (avec ou sans critère de sélection) :</li>
<pre><code class="language-sql">SELECT * FROM doctors;</code></pre>
<pre><code class="language-sql">SELECT * FROM doctors WHERE age = 45;</code></pre></p>

  <li>Mettre à jour une entrée :</li>
<pre><code class="language-sql">UPDATE doctors SET age = 40, name = 'John Smith' WHERE id = 3;</code></pre>

  <li>Supprimer une entrée :</li>
<pre><code class="language-sql">DELETE FROM doctors WHERE id= 3;</code></pre>

  <li>Lire les éléments d'une table selon un critère d'une table liée : </li>
<pre><code class="language-sql">SELECT * FROM inhabitants
JOIN cities ON cities.id = inhabitants.city_id
WHERE cities.name = 'Paris';</code></pre>

</ul>


<h2>5. Pour aller plus loin</h2>
<p>Voici quelques ressources pour être au top du SQL.</p>
<ul>
  <li> <a href="https://www.w3schools.com/sql/" target="_blank">Le cours de W3 Schools</a>, qui contient une doc exhaustive de ce que l'on veut faire en SQL. Très pratique pour vérifier des syntaxes de méthodes.</li>
  <li> <a href="https://sqlzoo.net/" target="_blank">Plein d'exercices chez SQL Zoo</a>, idéal pour s'entraîner et se sentir un Data-Analyst</li>
<li><a href="https://sql.sh/" class="primary"> SQL avec des exercices </li>
</ul>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>


  <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #FF4081 " >
          <h1>Projet : Jouer avec ses premières base de données</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          <h2>1. Introduction</h2>
<p>Tout programmeur doit savoir créer un back-end robuste : même ceux qui finalement se spécialiseront en front-end devront parfaitement comprendre le fonctionnement d'une BDD pour faire des jolies views dynamiques. Et comme tu seras amené à concevoir et manipuler des centaines de bases de données dans ta vie de programmeur, autant commencer tout de suite 😃</p>

<h2>2. Le projet</h2>


<h3>2.1. La startup tech du moment</h3>
<p>Ça y est, tu tiens la prochaine licorne française, tu vas conquérir le monde avec une app qui va révolutionner le monde du blogging. Ça va tout déchirer et Mark Zuckerberg va chialer. Avant de faire le code de ton blog, nous allons te demander de concevoir la base de données de ce dernier. Ainsi, tu vas devoir créer, en SQLite les tables qui constitueront ta BDD avec leurs relations et leurs attributs.</p>

<p>Voici, sans plus tarder, l'architecture de ton app de blogging : </p>
<ul>
  <li>L'application va accueillir plusieurs <code>user</code> et ils auront tous un nom.</li>
  <li>Chaque utilisateur peut créer plusieurs <code>article</code> et chaque article est forcément créé par un user.</li>
  <li>Un article peut appartenir à plusieurs <code>category</code> ; chaque category a un titre.</li>
  <li>Une catégorie peut appartenir à plusieurs <code>tag</code> ; chaque tag a un titre et une couleur.</li>
</ul>

<p>Nous allons te demander d'utiliser SQLite pour créer cette base de données, ainsi que les tables correspondantes. Crée ensuite un premier utilisateur en base.</p>

<h3>2.2. Concepts de sites et base de données</h3>
<p>Ce premier exercice sur un blog a permis de bien t'échauffer et de réviser la création de base de données en langage SQL. Mais la partie la plus complexe est de concevoir l'architecture complète de la BDD : en te guidant sur le blog, on t'a évité cette étape. <br>
À présent c'est ton tour ! On va te décrire un concept et c'est à toi de concevoir la BDD de A à Z. Liste (à tête reposée) les différentes tables, attributs, et jointures pour les sites ci-dessous. <b>Tu n'auras pas besoin de les créer en SQL, mais juste de les concevoir, dans un fichier .txt par exemple.</b></p>


<h4>2.2.1. MOOCademy</h4>
<p>Tu dois créer une plateforme d'apprentissage en ligne. Il y a plein de cours. Chaque cours a un titre et une description. Enfin, chaque cours a plusieurs leçons, qui ont un titre et un body.</p>

<h4>2.2.2. The Hacking Pinterest</h4>
<p>Tu veux faire de la concurrence à Pinterest, donc tu voudrais créer un site où les utilisateurs peuvent créer des "pins". Chaque pin contient l'URL d'une image sur le net. Les utilisateurs peuvent commenter les pins, mais ne peuvent pas commenter les commentaires.</p>

<h4>2.2.3. The Hacking News</h4>
<p>Tu veux créer un message board à la Hacker News. Les utilisateurs peuvent poster des liens. Les autres utilisateurs peuvent commenter les liens soumis, ou commenter les commentaires (mais on ne peut pas aller plus loin qu'un commentaire de commentaire). Comment faire en sorte qu'un commentaire sache où dans la hiérarchie il se trouve ? 🤔</p>

<h4>2.2.4. The Hacking Class</h4>
<p>Tu vas encore faire un site d'éducation en ligne. Dans ce site il y aura des élèves qui peuvent s'inscrire à un seul cours. Un cours pourra avoir plusieurs élèves.</p>

<h3>2.3. Faire des requêtes en base</h3>
<p>Suite à THP, une startup trop cool spécialisée dans la musique veut te recruter pour tes compétences de Data Analyst. C'est la fête. Comme cette startup existe déjà depuis plusieurs années, ils ont une base de données existante, et vont te demander de travailler dessus.</p>

<p>Dans cet exercice, nous allons te demander de récupérer une base de données existante, et de faire des requêtes SQL dedans, afin de récupérer les datas qui t'intéressent, et qui feront de toi une star de la musique. Nous allons travailler sur <a href="http://www.sqlitetutorial.net/wp-content/uploads/2018/03/chinook.zip" target="_blank">le fichier suivant</a>, qui contient la BDD complète pour faire les requêtes.</p>

<p>Je vais te demander de retrouver les informations suivantes dans la BDD que tu as téléchargée. Tu devras rédiger les requêtes en langage SQL sur ton terminal avec la gem SQLite3. Certaines requêtes avec des jointures ne seront pas faciles au premier abord, donc nous t'invitons à bien décortiquer les ressources que nous t'avons données 😉</p>

<p>Rédige les requêtes SQL ayant les fonctionnalités suivantes : </p>

<ul>
  <li> Récupérer tous les albums</li>
  <li> Récupérer tous les albums dont le titre contient "Great" (<a href="https://www.w3schools.com/sql/sql_wildcards.asp" target="_blank">indice</a>) </li>
  <li> Donner le nombre total d'albums contenus dans la base (sans regarder les id bien sûr)</li>
  <li> Supprimer tous les albums dont le nom contient "music"</li>
  <li> Récupérer tous les albums écrits par AC/DC</li>
  <li> Récupérer tous les titres des albums de AC/DC</li>
  <li> Récupérer la liste des titres de l'album "Let There Be Rock"</li>
  <li> Afficher le prix de cet album ainsi que sa durée totale</li>
  <li> Afficher le coût de l'intégralité de la discographie de "Deep Purple"</li>
  <li> Créer l'album de ton artiste favori en base, en renseignant correctement les trois tables albums, artists et tracks</li>
</ul>

<h3>2.4. Concevoir des bases de données de sites, vol. 2</h3>
<p>Est-ce que tu t'en souviens de MOOCademy, The Hacking Pinterest, The Hacking News, The Hacking Class ? Et bien maintenant tu vas devoir créer les bases de données que tu as conçues, en utilisant SQLite3.</p>

<h2>3. Rendu attendu</h2>
<p>Plein de fichiers :</p>
<ul>
  <li>Un fichier .txt (ou .md) ou diagramme ERD avec la structure de chaque BDD (blog, MOOCacademy, Hackinterest, Hacking News, Hacking Class) ;</li>
  <li>Un fichier .txt (ou .md) contenant les requêtes SQL qui permettent d'obtenir les infos demandées sur notre BDD musicale ;</li>
  <li>Un fichier .sqlite contenant la BDD de chaque appli.</li>
</ul>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>



</div>


  </div>
</div>
    <script src="/packs/dashboard-031178fac0de4f91cbcc.js"></script>
    

    <script charset="utf-8">
      $('input[name=authenticity_token]').val($('meta[name=csrf-token]').attr('content'));
    </script>

  </body>
</html>

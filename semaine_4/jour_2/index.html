<!DOCTYPE html>
<html class="loading" lang="fr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/thp/style/bootstrap.css">
    <title>The hacking project offline</title>
  </head>
  <body class="vertical-layout vertical-menu 2-columns  menu-expanded fixed-navbar" data-open="click" data-menu="vertical-menu" data-color="bg-gradient-x-primary-blue" data-col="2-columns">
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <h1 class="navbar-brand">THE HACKING PROJECT</h1>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarColor01">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="/thp">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/thp/features">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/thp/about">About</a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search">
            <button class="btn btn-secondary my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
      </nav>
<a type="button" class="btn btn-primary" href="/thp/semaine_2/">Semaine 2</a>

<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="content-header row"></div>
    
      <div class="container">
    <div class="card">
  <div class="card-header">
    <h4 class="text-center"> Programme jour par jour</h4>
  </div>
  <div class="card-body">
    <div class="text-center">
    <a href="/thp/semaine_1">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
        <i class="fa fa-terminal"></i>&nbsp;&nbsp;&nbsp;Lun
      </button>
</a>    <a href="/thp/semaine_1/jour_2">
      <button class="btn btn-secondary btn-outline-dark btn-lg mr-4">
        <i class="fa fa-code"></i>&nbsp;&nbsp;&nbsp;Mar
      </button>
</a>    <a href="/thp/semaine_1/jour_3">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
        <i class="fa fa-desktop"></i>&nbsp;&nbsp;&nbsp;Mer
      </button>
</a>    <a href="/thp/semaine_1/jour_4">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
      <i class="fa fa-folder-open"></i>&nbsp;&nbsp;&nbsp;Jeu
      </button>
</a>    <a href="/thp/semaine_1/jour_5">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
      <i class="fa fa-bullhorn"></i>&nbsp;&nbsp;&nbsp;Ven
      </button>
</a>    </div>
  </div>
</div>

<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="content-header row"></div>
    
      
<div class="content-body">
      <h2 class="text-center">D√©couverte de SQL</h2>
      <h4 class="text-center">Initiation √† Rails</h4>
  <div class="row">
     <div class="col-xl-3 col-lg-6 col-md-12">
  <div class="card">
    <div class="card-content">
      <div class="card-body">
        <div class="media d-flex">
          <div class="align-self-top">
              <i class="ft-calendar icon-opacity info font-large-4"></i>
          </div>
          <div class="media-body text-right align-self-bottom mt-3">
              <span class="d-block mb-1 font-medium-1"></span>
              <h3 class="info mb-0">
                 Jour 24 / 55</h3>
          </div>
        </div>
        <div class="progress progress-sm mt-1 mb-0 box-shadow-2">
            <div class="progress-bar bg-gradient-x-info" role="progressbar" style="width: 43%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="120">
            </div>
        </div>
      </div>
    </div>
  </div>
 </div>


    <div class="col-xl-3 col-lg-6 col-md-12">
  <div class="card">
    <div class="card-content">
      <div class="card-body">
        <div class="media d-flex">
          <div class="align-self-top">
            <i class="ft-heart icon-opacity danger font-large-4"></i>
          </div>
          <div class="media-body text-right align-self-bottom mt-3">
            <span class="d-block mb-1 font-medium-1">Jokers restant</span>
            <h3 class="danger mb-0">
                3
            </h3>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

    <div class="col-xl-3 col-lg-6 col-md-12">
    <div class="card">
        <div class="card-content">
            <div class="card-body">
                <div class="media d-flex">
                    <div class="align-self-top">
                        <a href="/dashboard/assignments?locale=fr">
                           <i class="ft-fast-forward icon-opacity warning font-large-4"></i>
</a>                    </div>
                    <div class="media-body text-right align-self-bottom mt-3">
                        <span class="d-block mb-1 font-medium-1">Missions</span>
                            <div class="badge border-danger danger badge-border">Pas inscrit</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

  </div>
  <div class="row">
        <div class="container">
    <div class="col-xl-12 col-lg-12 col-md-12">
    <div class="card">
        <div class="card-header">
        <h1 >Initiation √† Rails
                <i class="fa fa-beer text-warning"></i>
        </h1>
        
        </div>
        <div class="card-content">
        <div class="card-body">
            <div class="card-text">
            <h2 class="text-center">D√©couverte de SQL</h2>
            <div class="cd-horizontal-timeline loaded">
                <div class="timeline">
                <div class="events-wrapper">
                    <div class="events" style="width: 1800px;">
                    <ol>
                                <li>
                                    <a style="left:120px;" href="/dashboard/weeks/4/days/1?locale=fr">
                                        Lun
                                            <i class="fa fa-beer text-warning" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Rendez-vous pour boire un coup"></i>

</a>                                </li>
                            <li>
                                <a class="selected" style="left:240px;" data-toggle="tooltip" data-placement="top" title="D√©couverte de SQL" href="/dashboard/weeks/4/days/2?locale=fr">
                                    Mar
                                        <i class="fa fa-beer text-warning" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Rendez-vous pour boire un coup"></i>

</a>                                </li>
                                <li>
                                    <a style="left:360px;" href="/dashboard/weeks/4/days/3?locale=fr">
                                        Mer
                                            <i class="fa fa-rocket text-danger" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Projet √† rendre ce jour-l√†"></i>

</a>                                </li>
                                <li>
                                    <a style="left:480px;" href="/dashboard/weeks/4/days/4?locale=fr">
                                        Jeu
                                            <i class="fa fa-rocket text-danger" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Projet √† rendre ce jour-l√†"></i>
    <i class="fa fa-pencil text-success" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Corrections cette journ√©e l√†" ></i>

</a>                                </li>
                                <li>
                                    <a style="left:600px;" href="/dashboard/weeks/4/days/5?locale=fr">
                                        Ven
                                            <i class="fa fa-pencil text-success" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Corrections cette journ√©e l√†" ></i>


</a>                                </li>
                    </ol>
                </div>
                </div>
            </div>
            </div>
        </div>
        </div>
    </div>
    </div>
<div>
  </div>

  <!-- Les fameuses corrections qui n'arrivnet que les jours concern√©s -->


    <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #5E66E5 " >
          <h1>Cours : SQL pour d√©butants</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          <h2>1. Introduction</h2>
<p>Quand tu cr√©es des applications web, il est indispensable de stocker les donn√©es (utilisateurs, potins, etc.) quelque part. Dans cette ressource nous allons t'apprendre comment fonctionnent les bases de donn√©es avant de voir pourquoi et comment lier des tables (morceaux de bases de donn√©es) entre elles. √Ä l'avenir, nous nous focaliserons uniquement sur SQL quand il s'agira de bases de donn√©es¬†: c'est LE langage de r√©f√©rence pour leur gestion.</p>

<p>Apr√®s quelques d√©monstrations du fonctionnement de SQL, tu devrais :</p>

<ul>
  <li>Savoir comment marche une base de donn√©es, un √©l√©ment que tu retrouveras dans TOUTE application web¬†;</li>
  <li>Avoir un aper√ßu du quotidien d'un Data Scientist, un m√©tier tr√®s hype en ce moment o√π on passe ses journ√©es √† miner dans des BDD.</li>
</ul>

<p>BDD, √† toi de jouer !</p>

<h2>2. Historique</h2>
<p>Tr√®s rapidement dans l'informatique, nous e√ªmes besoin de stocker les informations, trait√©es par nos programmes, quelque part¬†: ainsi furent cr√©√©es les bases de donn√©es. En 1970, un certain Edgar Codd, ing√©nieur chez IBM, a invent√© un moyen de lier en base des tables entre elles. Ainsi, une entr√©e, comme un <code>Gossip</code>, pourrait √™tre li√© √† une autre entr√©e, par exemple en le faisant appartenir √† un <code>User</code>. Ce mod√®le de base de donn√©es relationnelle a r√©volutionn√© l'informatique puisqu'aujourd'hui, il reste le format le plus r√©pandu dans les applications.</p>

<p>Au d√©but des ann√©es 70, deux ing√©nieurs chez IBM nomm√©es Donald Chamberlin et Raymond Boyce, gr√¢ce aux travaux de "Ted" Codd ont invent√© un langage pour cr√©er, modifier et lire une base de donn√©e relationnelle¬†: le SQL ou Structured Query Language. Leur invention est devenue tout aussi importante que celle de Mr Codd dans le monde de l'informatique¬†: aujourd'hui le SQL est le langage de gestion de donn√©es le plus utilis√© sur notre petite plan√®te.</p>

<h2>3. La ressource</h2>

<h3>3.1. Introduction aux bases de donn√©es</h3>
<h4>3.1.1. Un gros classeur Excel</h4>
<p>Les projets de la semaine pass√©e t'ont montr√© que stocker tous les objets li√©s √† notre application dans un fichier CSV, c'est fonctionnel mais pas toujours tr√®s pratique. En effet, supprimer une entr√©e n'est pas simple, chercher un √©l√©ment donn√© peut √™tre long et encore, tu n'as pas test√© avec des milliers de lignes‚Ä¶ <br>
Nous allons donc commencer √† utiliser les VRAIES bases de donn√©es pour nos applications. Pour te faire un avis, regarde <a href="https://www.youtube.com/watch?v=wR0jg0eQsZA" target="_blank">cette vid√©o</a> de LucidChart o√π ils expliquent le concept des bases de donn√©es. (Ils parlent m√™me des ERD (Entity‚ÄìRelationship Diagram) qui permettent de les dessiner¬†; on verra plus bas quelques outils √† ce sujet). Ensuite, je t'invite √† regarder cette <a href="https://www.youtube.com/watch?v=IXycPq7MnwE" target="_blank">vid√©o de Khan Academy</a> qui explique les bases de donn√©es.</p>

<p>Comme tu l'as compris, une base de donn√©es permet de stocker facilement de la donn√©e et d'y avoir acc√®s. On peut se repr√©senter une base de donn√©es comme <b>un ensemble de gros tableurs Excel, avec des lignes et des colonnes, qu'on appellerait des tables</b>.</p>

<p>Voici un exemple d'une table d'utilisateurs (<code>users</code>) :</p>
<div class="table-responsive">
<table class="table">
  <thead>
  <tr>
    <th>id</th>
    <th>first_name</th>
    <th>last_name</th>
    <th>age</th>
    <th>city</th>
  </tr>
  </thead>
  <tr>
    <th>1</th>
    <th>Martin</th>
    <th>Dupond</th>
    <th>27</th>
    <th>Paris</th>
  </tr>
  <tr>
    <th>2</th>
     <th>Jack</th>
     <th>Quilley</th>
     <th>38</th>
     <th>London</th>
   </tr>
     <tr>
      <th>3</th>
     <th>Vittorio</th>
     <th>Piccolini</th>
     <th>18</th>
     <th>Milan</th>
   </tr>
</table>
</div>

<p>Tu remarqueras que la premi√®re colonne est un peu √©tonnante¬†: elle s'appelle "id". Son r√¥le est d'ordonner les √©l√©ments de la BDD et de facilement y faire r√©f√©rence¬†: <b>l'id est un identifiant unique associ√© √† chaque entr√©e dans la table</b>.</p>



<h4>3.1.2. La base de donn√©es relationnelle</h4>
<p>Prenons l'exemple d'une base de donn√©es contenant une table de professeurs. Chaque professeur a des attributs comme un nom, un t√©l√©phone, etc. Mais on aimerait aussi que notre professeur donne des cours. Chaque cours aura une heure de d√©but, un nom, etc. Plut√¥t que de faire une gigantesque table contenant chaque professeur et ses cours, il est plus simple d'avoir deux tables distinctes¬†: une pour les profs (nomm√©e <code>teachers</code>) et une pour les cours (nomm√©e <code>classes</code>). Ensuite, pour savoir quel professeur donne quel cours, √ßa serait top de pouvoir lier les tables entre elles comme le sch√©ma ci-dessous :</p>

<img src="https://i.imgur.com/Am57ajH.png" class="img-fluid">

<p>En y regardant de plus pr√®s, nous n'aurons pas pu mettre toutes ces informations dans une seule table car chaque professeur peut avoir N cours. Parfois il en a un seul (N=1), parfois aucun (N=0), parfois dix (N=10). Il est donc impossible de mettre toutes les informations d'un professeur sur une seule ligne de la table <code>teachers</code> car on ne conna√Æt pas le nombre de colonnes n√©cessaires (vu qu'il n'y a pas de nombre maximum de cours qu'un prof peut avoir).</p>
<p>Au final, c'est un cas qu'on rencontre couramment quand on fait face √† des BDD complexes¬†: on doit cr√©er des tables et les lier entre elles. C'est ce que l'on appelle les <b>bases de donn√©es relationnelles</b>. <br>
Dans <a href="https://www.youtube.com/watch?v=h8IWmmxIyS0" target="_blank">cette vid√©o</a> de O'Reilly, tu pourras comprendre ce qu'est qu'une base de donn√©es relationnelle.</p>

<p>Il existe trois types de relations entre bases de donn√©es :</p>

<ul>
  <li><b>Relation 1-1</b>¬†: Assez rare, elle sert √† mod√©liser l'exclusivit√©. Par exemple¬†: dans une hypoth√©tique base de donn√©es "session THP en cours", un moussaillon a un unique ordinateur et chaque ordinateur appartient √† un moussaillon. Bref, c'est du 1-1 entre 2 tables <code>cabin_boys</code> et <code>computers</code>.</li>
  <li><b>Relation 1-N</b>¬†: Tr√®s courante, elle sert √† mod√©liser une appartenance. Par exemple : dans une hypoth√©tique base de donn√©es "France", chaque habitant vit dans une ville unique mais chaque ville a plusieurs habitants. C'est du 1-N entre la table <code>cities</code> et la table <code>people</code>.</li>
  <li><b>Relation N-N</b>¬†: Tr√®s courante aussi, elle permet de mod√©liser un lien mais sans aucune unicit√©. Par exemple¬†: un docteur a plusieurs patients et un patient peut avoir plusieurs docteurs. C'est du N-N entre la table <code>doctors</code> et la table <code>patients</code>.</li>
</ul>

<h4>3.1.3. Penser une base de donn√©es</h4>
<p>Avant de foncer t√™te baiss√©e dans le codage d'une BDD, il est important de bien la mod√©liser pour voir les diff√©rents √©l√©ments qui vont la composer. Sans une vision globale et un dessin de ta BDD enti√®re, <b>tu vas forc√©ment oublier quelque chose</b> et t'en mordre les doigts plus tard. <br>
Voici les 3 √©l√©ments que tu vas devoir lister pour mod√©liser ta BDD √† t√™te repos√©e :</p>

<ul>
  <li>Les <b>tables</b>¬†: ce sont les tableaux qui composeront ta base de donn√©es. C'est ce qui demande le plus de r√©flexion mais qui t'aidera √† poser des concepts concrets sur des th√®mes abstraits. Tu verras plus tard qu'au final, une table (SQL) et un objet (Ruby) sont tr√®s li√©s... Exemples de tables¬†: <code>users</code>, <code>orders</code>, <code>cities</code>, <code>articles</code>, etc.</li>
  <li>Les <b>relations entre tables</b>¬†: il vous faut √©tablir quelles tables sont li√©es entre elles et via quelle relation (1-1, 1-N et N-N). En g√©n√©ral, cette r√©flexion vient en m√™me temps que celles o√π on d√©termine les tables. Par exemple¬†: relation 1-N entre <code>users</code> et <code>cities</code> (un utilisateur vit dans une ville, une ville peut √™tre li√© √† plusieurs utilisateurs), relation N-N entre <code>users</code> et les <code>items</code> (un utilisateur peut acheter plusieurs articles et chaque article peut avoir √©t√© achet√© par plusieurs utilisateurs), etc. </li>
  <li>Les <b>attributs de chaque table</b>¬†: ce sont en gros les colonnes qui d√©finissent chaque entr√©e d'une table. Par exemple, dans une table <code>users</code> on aura¬†: <code>first_name</code>, <code>gender</code>, <code>email</code>, <code>phone</code> etc.</li>
</ul>

<p>Cette phase de r√©flexion doit √™tre men√©e en √©quipe et sans ordinateur. Plusieurs choix :</p>

<ul>
  <li>Sur un tableau blanc, √©ventuellement √† l'aide de post-its¬†;</li>
  <li>En faisant un gros diagramme sur une feuille A4 avec un bon vieux stylo¬†;</li>
  <li>N'h√©site pas √† utiliser un logiciel d'ERD pour t'aider. Voici une liste¬†:
  <ul>
    <li><a href="https://www.lucidchart.com" target="_blank">LucidChart</a></li>
    <li><a href="https://online.visual-paradigm.com/fr/" target="_blank">VisualParadigm Online</a></li>
  </ul></li>
</ul>

<p>Entra√Æne-toi¬†! Imagine des id√©es de startup puis fais un diagramme via un ERD.</p>



<h3>3.2. SQL</h3>

<h4>3.2.1. D√©couverte de SQL</h4>

<p>Afin d'interagir avec la base de donn√©es, nous allons utiliser le langage SQL ou "Structured Query Language" qui permet facilement d'en r√©cup√©rer les informations. <br>
Pour cr√©er notre premi√®re base de donn√©es sur notre machine, nous allons utiliser <code>SQLite3</code>. Pour l'installer :</p>

<ul>
  <li>Sur Ubuntu, fait :</li>
  <pre><code class="language-shell">$ sudo apt-get install sqlite libsqlite3-dev</code></pre>
  <li>Sur macOS, fait :</li>
  <pre><code class="language-shell">$ brew install sqlite</code></pre>
</ul>

<p>Une fois le logiciel install√©, cr√©e un dossier de test, va dedans et rentre¬†: </p>

<pre><code class="language-shell">$ sqlite3 db.sqlite</code></pre>

<p>Cela va cr√©er un fichier nomm√© <code>db.sqlite</code> qui est ta base de donn√©es (‚ö†Ô∏è le fichier ne sera sauvegard√© que lorsqu'une table sera cr√©√©e dedans). Au passage, cela te fait rentrer dans l'interface SQLite3 depuis laquelle tu vas pouvoir passer des commandes SQL sur la BDD. <br>
Pro-tip¬†: Pour sortir de SQLite3, le raccourci est <code>ctrl</code>-<code>D</code> et non <code>ctrl</code>-<code>C</code>.</p>

<p>Pour cr√©er ta premi√®re table, voil√† la syntaxe √† saisir dans l'interface SQLite3 :</p>

<pre><code class="language-sql">CREATE TABLE `doctors` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` TEXT,
`age` INTEGER,
`specialty` TEXT
);</code></pre>

<p>Cette commande va cr√©er une table <code>doctors</code>, avec son fameux <code>id</code> et les valeurs <code>name</code> (un nom sous forme de texte), <code>age</code> (un √¢ge sous forme d'entier) et <code>specialty</code> (une sp√©cialit√© sous forme de texte).<br>
Avec la commande <code>AUTOINCREMENT</code>, on laisse la base de donn√©es s'occuper de l'incr√©mentation automatique de l'id¬†: √† chaque fois qu'une entr√©e sera cr√©√©e dans la table <code>doctors</code>, elle portera un nouvel <code>id</code> (√©gal au dernier <code>id</code> + 1). </p>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">üöÄ ALERTE BONNE ASTUCE</h4>
      <p class="card-text">Les commandes suivantes permettront de visualiser plus facilement le contenu de ta table quand tu taperas la commande <code>SELECT * FROM doctors</code>. Saisis-les une fois dans l'interface de SQlite3¬†: </p>
<pre><code class="language-shell">.mode column
.header on</code></pre>
      <p>La commande suivante permet de lister toutes les tables qui ont d√©j√† √©t√© cr√©√©es dans ton fichier de base de donn√©es.</p>
      <pre><code class="language-shell">.tables</code></pre>

    </div>
  </div>
</div>

<h4>3.2.2. Faire du CRUD en SQL</h4>
<p>Qu'est-ce que le CRUD¬†? Ce sont les 4 grandes actions qu'on voudra effectuer sur les entr√©es d'une BDD :</p>
<ul>
  <li>Create¬†: cr√©er une nouvelle entr√©e dans une table. Il faut utiliser la commande <code>INSERT</code>¬†;</li>
  <li>Read¬†: lire les entr√©es d'une table. Il faut utiliser la commande <code>SELECT</code>¬†;</li>
  <li>Update¬†: mettre √† jour une entr√©e d'une table. Il faut utiliser la commande <code>UPDATE</code>¬†;</li>
  <li>Delete¬†: supprimer une entr√©e. Il faut utiliser la commande <code>DELETE</code>.</li>
</ul>
<p>Ci-dessous, quelques exemples concrets.</p>
<p>Pour cr√©er un docteur dans notre base de donn√©es il suffit d'√©crire :</p>
<pre><code class="language-sql">INSERT INTO doctors (name, age, specialty) VALUES ('Dr. Dolladille', 45, 'Dentist');</code></pre>

<p>Pour lire l'ensemble des √©l√©ments de la table <code>doctors</code> (comme on l'a vu ci-dessus) la commande est¬†: </p>
<pre><code class="language-sql">SELECT * FROM doctors;</code></pre>

<p>Si on veut s√©lectionner un √©l√©ment en particulier on peut √©crire :</p>
<pre><code class="language-sql">SELECT * FROM doctors WHERE age = 45;</code></pre>

<p>Pour mettre √† jour un param√®tre, la commande est la suivante :</p>
<pre><code class="language-sql">UPDATE doctors SET age = 40, name = 'John Smith' WHERE id = 3;</code></pre>

<p>Et enfin pour supprimer un √©l√©ment :</p>
<pre><code class="language-sql">DELETE FROM doctors WHERE id= 3;</code></pre>

<h4>3.2.3. Les tables jointes</h4>
<p>Nous t'avons pr√©sent√© la logique des BDD relationnelles. Quand deux tables sont li√©es par une relation (par exemple 1-N), on parle alors de <b>tables jointes ("join tables" en anglais)</b>. Illustrons cela en imaginant deux tables¬†:</p>

<p>La table <code>cities</code>:</p>
<div class="table-responsive">
<table class="table">
  <thead>
  <tr>
    <th>id</th>
    <th>name</th>
  </tr>
</thead>
  <tr>
    <th>1</th>
    <th>Paris</th>
  </tr>
   <tr>
    <th>2</th>
    <th>London</th>
  </tr>
   <tr>
    <th>3</th>
    <th>Washington D.C.</th>
  </tr>
   <tr>
    <th>4</th>
    <th>Rome</th>
  </tr>
</table>
</div>


<p>Et la table <code>inhabitants</code>:</p>
<div class="table-responsive">
<table class="table">
  <thead>
  <tr>
  <th>id</th>
  <th>city_id</th>
  <th>first_name</th>
  <th>last_name</th>
  <th>age</th>
</tr>
</thead>
  <tr>
  <th>1</th>
  <th>3</th>
  <th>Donald</th>
  <th>Trump</th>
  <th>71</th>
  </tr>
  <tr>
  <th>2</th>
  <th>4</th>
  <th>Matteo</th>
  <th>Renzi</th>
  <th>43</th>
  </tr>
  <tr>
  <th>3</th>
  <th>1</th>
  <th>Emmanuel</th>
  <th>Macron</th>
  <th>40</th>
  </tr>
  <tr>
  <th>4</th>
  <th>2</th>
  <th>Theresa</th>
  <th>May</th>
  <th>61</th>
  </tr>
</table>
</div>

<p>On peut voir imm√©diatement que ces deux tables sont li√©es puisque dans la table <code>inhabitants</code>, j'ai deux cl√©s uniques :</p>
<ul>
  <li> La cl√© <code>id</code>, aussi appel√©e cl√© primaire ou primary key.</li>
  <li> La cl√© <code>city_id</code>, aussi appel√©e cl√© √©trang√®re ou foreign key.</li>
</ul>

<p>C'est la cl√© √©trang√®re qui permet la liaison entre les deux bases de donn√©es. Ainsi, on voit que dans la table <code>inhabitants</code>, l'entr√©e "Donald Trump" a un attribut <code>city_id = 3</code>¬†: cette entr√©e est donc li√©e √† l'entr√©e portant l'<code>id = 3</code> dans la table <code>cities</code>. Au final, on a juste indiqu√© ici que Donald Trump habitait Washington DC.</p>

<p>La force de la relation est qu'il est possible de faire une requ√™te SQL qui me retourne les entr√©es de la table <code>inhabitants</code> selon un crit√®re de la table <code>cities</code>. Par exemple, pour r√©cup√©rer les habitants de Paris, il suffit d'√©crire :</p>

<pre><code class="language-sql">SELECT * FROM inhabitants
JOIN cities ON cities.id = inhabitants.city_id
WHERE cities.name = 'Paris';</code></pre>

<p>Ici j'ai dit de joindre la table cities tel que l'id que je trouve dans la table cities (<code>cities.id</code>) est le m√™me que le city_id qui se trouve dans la table inhabitants (identifi√© par <code>inhabitants.city_id</code>).</p>

<h4>3.2.4. Plus d'infos sur les relations N-N</h4>
<p>Les relations les plus complexes sont les relations N-N. Pour mieux les comprendre voici quelques articles int√©ressants :
</p> 
<ul>
  <li>https://www.techiediaries.com/sqlite-create-table-foreign-key-relationships/</li>
  <li>http://cerig.pagora.grenoble-inp.fr/tutoriel/bases-de-donnees/chap06.htm</li>
</ul>


<h2>4. Points importants √† retenir</h2>
<p>Les bases de donn√©es relationnelles sont la base de la majorit√© des applications. Pour concevoir une BDD relationnelle, SQL est le langage de pr√©dilection.</p>
<p>Avant de coder une BDD, il faut se poser pour √©tablir toutes les tables, les relations entre elles et leurs attributs.</p>
<p>Voici une s√©lection de commandes classiques en SQL :</p>

<ul>
  <li>Cr√©er une table :</li>
<pre><code class="language-sql">CREATE TABLE `doctors` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` TEXT,
`age` INTEGER,
`specialty` TEXT
);</code></pre>

  <li>Cr√©er une entr√©e dans une table :</li>
<pre><code class="language-sql">INSERT INTO doctors (name, age, specialty) VALUES ('Dr. Dolladille', 45, 'Dentist');</code></pre>

  <li>Lire des √©l√©ments (avec ou sans crit√®re de s√©lection) :</li>
<pre><code class="language-sql">SELECT * FROM doctors;</code></pre>
<pre><code class="language-sql">SELECT * FROM doctors WHERE age = 45;</code></pre></p>

  <li>Mettre √† jour une entr√©e :</li>
<pre><code class="language-sql">UPDATE doctors SET age = 40, name = 'John Smith' WHERE id = 3;</code></pre>

  <li>Supprimer une entr√©e :</li>
<pre><code class="language-sql">DELETE FROM doctors WHERE id= 3;</code></pre>

  <li>Lire les √©l√©ments d'une table selon un crit√®re d'une table li√©e¬†: </li>
<pre><code class="language-sql">SELECT * FROM inhabitants
JOIN cities ON cities.id = inhabitants.city_id
WHERE cities.name = 'Paris';</code></pre>

</ul>


<h2>5. Pour aller plus loin</h2>
<p>Voici quelques ressources pour √™tre au top du SQL.</p>
<ul>
  <li> <a href="https://www.w3schools.com/sql/" target="_blank">Le cours de W3 Schools</a>, qui contient une doc exhaustive de ce que l'on veut faire en SQL. Tr√®s pratique pour v√©rifier des syntaxes de m√©thodes.</li>
  <li> <a href="https://sqlzoo.net/" target="_blank">Plein d'exercices chez SQL Zoo</a>, id√©al pour s'entra√Æner et se sentir un Data-Analyst</li>
<li><a href="https://sql.sh/" class="primary"> SQL avec des exercices </li>
</ul>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>


  <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #FF4081 " >
          <h1>Projet : Jouer avec ses premi√®res base de donn√©es</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          <h2>1. Introduction</h2>
<p>Tout programmeur doit savoir cr√©er un back-end robuste¬†: m√™me ceux qui finalement se sp√©cialiseront en front-end devront parfaitement comprendre le fonctionnement d'une BDD pour faire des jolies views dynamiques. Et comme tu seras amen√© √† concevoir et manipuler des centaines de bases de donn√©es dans ta vie de programmeur, autant commencer tout de suite üòÉ</p>

<h2>2. Le projet</h2>


<h3>2.1. La startup tech du moment</h3>
<p>√áa y est, tu tiens la prochaine licorne fran√ßaise, tu vas conqu√©rir le monde avec une app qui va r√©volutionner le monde du blogging. √áa va tout d√©chirer et Mark Zuckerberg va chialer. Avant de faire le code de ton blog, nous allons te demander de concevoir la base de donn√©es de ce dernier. Ainsi, tu vas devoir cr√©er, en SQLite les tables qui constitueront ta BDD avec leurs relations et leurs attributs.</p>

<p>Voici, sans plus tarder, l'architecture de ton app de blogging¬†: </p>
<ul>
  <li>L'application va accueillir plusieurs <code>user</code> et ils auront tous un nom.</li>
  <li>Chaque utilisateur peut cr√©er plusieurs <code>article</code> et chaque article est forc√©ment cr√©√© par un user.</li>
  <li>Un article peut appartenir √† plusieurs <code>category</code>¬†; chaque category a un titre.</li>
  <li>Une cat√©gorie peut appartenir √† plusieurs <code>tag</code>¬†; chaque tag a un titre et une couleur.</li>
</ul>

<p>Nous allons te demander d'utiliser SQLite pour cr√©er cette base de donn√©es, ainsi que les tables correspondantes. Cr√©e ensuite un premier utilisateur en base.</p>

<h3>2.2. Concepts de sites et base de donn√©es</h3>
<p>Ce premier exercice sur un blog a permis de bien t'√©chauffer et de r√©viser la cr√©ation de base de donn√©es en langage SQL. Mais la partie la plus complexe est de concevoir l'architecture compl√®te de la BDD¬†: en te guidant sur le blog, on t'a √©vit√© cette √©tape. <br>
√Ä pr√©sent c'est ton tour¬†! On va te d√©crire un concept et c'est √† toi de concevoir la BDD de A √† Z. Liste (√† t√™te repos√©e) les diff√©rentes tables, attributs, et jointures pour les sites ci-dessous. <b>Tu n'auras pas besoin de les cr√©er en SQL, mais juste de les concevoir, dans un fichier .txt par exemple.</b></p>


<h4>2.2.1. MOOCademy</h4>
<p>Tu dois cr√©er une plateforme d'apprentissage en ligne. Il y a plein de cours. Chaque cours a un titre et une description. Enfin, chaque cours a plusieurs le√ßons, qui ont un titre et un body.</p>

<h4>2.2.2. The Hacking Pinterest</h4>
<p>Tu veux faire de la concurrence √† Pinterest, donc tu voudrais cr√©er un site o√π les utilisateurs peuvent cr√©er des "pins". Chaque pin contient l'URL d'une image sur le net. Les utilisateurs peuvent commenter les pins, mais ne peuvent pas commenter les commentaires.</p>

<h4>2.2.3. The Hacking News</h4>
<p>Tu veux cr√©er un message board √† la Hacker News. Les utilisateurs peuvent poster des liens. Les autres utilisateurs peuvent commenter les liens soumis, ou commenter les commentaires (mais on ne peut pas aller plus loin qu'un commentaire de commentaire). Comment faire en sorte qu'un commentaire sache o√π dans la hi√©rarchie il se trouve¬†? ü§î</p>

<h4>2.2.4. The Hacking Class</h4>
<p>Tu vas encore faire un site d'√©ducation en ligne. Dans ce site il y aura des √©l√®ves qui peuvent s'inscrire √† un seul cours. Un cours pourra avoir plusieurs √©l√®ves.</p>

<h3>2.3. Faire des requ√™tes en base</h3>
<p>Suite √† THP, une startup trop cool sp√©cialis√©e dans la musique veut te recruter pour tes comp√©tences de Data Analyst. C'est la f√™te. Comme cette startup existe d√©j√† depuis plusieurs ann√©es, ils ont une base de donn√©es existante, et vont te demander de travailler dessus.</p>

<p>Dans cet exercice, nous allons te demander de r√©cup√©rer une base de donn√©es existante, et de faire des requ√™tes SQL dedans, afin de r√©cup√©rer les datas qui t'int√©ressent, et qui feront de toi une star de la musique. Nous allons travailler sur <a href="http://www.sqlitetutorial.net/wp-content/uploads/2018/03/chinook.zip" target="_blank">le fichier suivant</a>, qui contient la BDD compl√®te pour faire les requ√™tes.</p>

<p>Je vais te demander de retrouver les informations suivantes dans la BDD que tu as t√©l√©charg√©e. Tu devras r√©diger les requ√™tes en langage SQL sur ton terminal avec la gem SQLite3. Certaines requ√™tes avec des jointures ne seront pas faciles au premier abord, donc nous t'invitons √† bien d√©cortiquer les ressources que nous t'avons donn√©es üòâ</p>

<p>R√©dige les requ√™tes SQL ayant les fonctionnalit√©s suivantes : </p>

<ul>
  <li> R√©cup√©rer tous les albums</li>
  <li> R√©cup√©rer tous les albums dont le titre contient "Great" (<a href="https://www.w3schools.com/sql/sql_wildcards.asp" target="_blank">indice</a>) </li>
  <li> Donner le nombre total d'albums contenus dans la base (sans regarder les id bien s√ªr)</li>
  <li> Supprimer tous les albums dont le nom contient "music"</li>
  <li> R√©cup√©rer tous les albums √©crits par AC/DC</li>
  <li> R√©cup√©rer tous les titres des albums de AC/DC</li>
  <li> R√©cup√©rer la liste des titres de l'album "Let There Be Rock"</li>
  <li> Afficher le prix de cet album ainsi que sa dur√©e totale</li>
  <li> Afficher le co√ªt de l'int√©gralit√© de la discographie de "Deep Purple"</li>
  <li> Cr√©er l'album de ton artiste favori en base, en renseignant correctement les trois tables albums, artists et tracks</li>
</ul>

<h3>2.4. Concevoir des bases de donn√©es de sites, vol. 2</h3>
<p>Est-ce que tu t'en souviens de MOOCademy, The Hacking Pinterest, The Hacking News, The Hacking Class¬†? Et bien maintenant tu vas devoir cr√©er les bases de donn√©es que tu as con√ßues, en utilisant SQLite3.</p>

<h2>3. Rendu attendu</h2>
<p>Plein de fichiers :</p>
<ul>
  <li>Un fichier .txt (ou .md) ou diagramme ERD avec la structure de chaque BDD (blog, MOOCacademy, Hackinterest, Hacking News, Hacking Class)¬†;</li>
  <li>Un fichier .txt (ou .md) contenant les requ√™tes SQL qui permettent d'obtenir les infos demand√©es sur notre BDD musicale¬†;</li>
  <li>Un fichier .sqlite contenant la BDD de chaque appli.</li>
</ul>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>



</div>


  </div>
</div>
    <script src="/packs/dashboard-031178fac0de4f91cbcc.js"></script>
    

    <script charset="utf-8">
      $('input[name=authenticity_token]').val($('meta[name=csrf-token]').attr('content'));
    </script>

  </body>
</html>

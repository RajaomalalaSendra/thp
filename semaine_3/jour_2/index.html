<!DOCTYPE html>
<html class="loading" lang="fr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/thp/style/bootstrap.css">
    <title>The hacking project offline</title>
  </head>
  <body class="vertical-layout vertical-menu 2-columns  menu-expanded fixed-navbar" data-open="click" data-menu="vertical-menu" data-color="bg-gradient-x-primary-blue" data-col="2-columns">
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <h1 class="navbar-brand">THE HACKING PROJECT</h1>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarColor01">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="/thp">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/thp/features">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/thp/about">About</a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search">
            <button class="btn btn-secondary my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
      </nav>
<a type="button" class="btn btn-primary" href="/thp/semaine_2/">Semaine 2</a>

<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="content-header row"></div>
    
      <div class="container">
    <div class="card">
  <div class="card-header">
    <h4 class="text-center"> Programme jour par jour</h4>
  </div>
  <div class="card-body">
    <div class="text-center">
    <a href="/thp/semaine_1">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
        <i class="fa fa-terminal"></i>&nbsp;&nbsp;&nbsp;Lun
      </button>
</a>    <a href="/thp/semaine_1/jour_2">
      <button class="btn btn-secondary btn-outline-dark btn-lg mr-4">
        <i class="fa fa-code"></i>&nbsp;&nbsp;&nbsp;Mar
      </button>
</a>    <a href="/thp/semaine_1/jour_3">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
        <i class="fa fa-desktop"></i>&nbsp;&nbsp;&nbsp;Mer
      </button>
</a>    <a href="/thp/semaine_1/jour_4">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
      <i class="fa fa-folder-open"></i>&nbsp;&nbsp;&nbsp;Jeu
      </button>
</a>    <a href="/thp/semaine_1/jour_5">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
      <i class="fa fa-bullhorn"></i>&nbsp;&nbsp;&nbsp;Ven
      </button>
</a>    </div>
  </div>
</div>

<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="content-header row"></div>
    
      
<div class="content-body">
      <h2 class="text-center">Jouer avec des excels</h2>
      <h4 class="text-center">Programmation Orientée Objet</h4>
  <div class="row">
     <div class="col-xl-3 col-lg-6 col-md-12">
  <div class="card">
    <div class="card-content">
      <div class="card-body">
        <div class="media d-flex">
          <div class="align-self-top">
              <i class="ft-calendar icon-opacity info font-large-4"></i>
          </div>
          <div class="media-body text-right align-self-bottom mt-3">
              <span class="d-block mb-1 font-medium-1"></span>
              <h3 class="info mb-0">
                 Jour 24 / 55</h3>
          </div>
        </div>
        <div class="progress progress-sm mt-1 mb-0 box-shadow-2">
            <div class="progress-bar bg-gradient-x-info" role="progressbar" style="width: 43%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="120">
            </div>
        </div>
      </div>
    </div>
  </div>
 </div>


    <div class="col-xl-3 col-lg-6 col-md-12">
  <div class="card">
    <div class="card-content">
      <div class="card-body">
        <div class="media d-flex">
          <div class="align-self-top">
            <i class="ft-heart icon-opacity danger font-large-4"></i>
          </div>
          <div class="media-body text-right align-self-bottom mt-3">
            <span class="d-block mb-1 font-medium-1">Jokers restant</span>
            <h3 class="danger mb-0">
                3
            </h3>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

    <div class="col-xl-3 col-lg-6 col-md-12">
    <div class="card">
        <div class="card-content">
            <div class="card-body">
                <div class="media d-flex">
                    <div class="align-self-top">
                        <a href="/dashboard/assignments?locale=fr">
                           <i class="ft-fast-forward icon-opacity warning font-large-4"></i>
</a>                    </div>
                    <div class="media-body text-right align-self-bottom mt-3">
                        <span class="d-block mb-1 font-medium-1">Missions</span>
                            <div class="badge border-danger danger badge-border">Pas inscrit</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

  </div>
  <div class="row">
        <div class="container">
    <div class="col-xl-12 col-lg-12 col-md-12">
    <div class="card">
        <div class="card-header">
        <h1 >Programmation Orientée Objet
                <i class="fa fa-space-shuttle text-danger"></i>
        </h1>
        
        </div>
        <div class="card-content">
        <div class="card-body">
            <div class="card-text">
            <h2 class="text-center">Jouer avec des excels</h2>
            <div class="cd-horizontal-timeline loaded">
                <div class="timeline">
                <div class="events-wrapper">
                    <div class="events" style="width: 1800px;">
                    <ol>
                                <li>
                                    <a style="left:120px;" href="/dashboard/weeks/3/days/1?locale=fr">
                                        Lun
                                            <i class="fa fa-beer text-warning" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Rendez-vous pour boire un coup"></i>

</a>                                </li>
                            <li>
                                <a class="selected" style="left:240px;" data-toggle="tooltip" data-placement="top" title="Jouer avec des excels" href="/dashboard/weeks/3/days/2?locale=fr">
                                    Mar
                                        <i class="fa fa-rocket text-danger" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Projet à rendre ce jour-là"></i>

</a>                                </li>
                                <li>
                                    <a style="left:360px;" href="/dashboard/weeks/3/days/3?locale=fr">
                                        Mer
                                            <i class="fa fa-pencil text-success" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Corrections cette journée là" ></i>


</a>                                </li>
                                <li>
                                    <a style="left:480px;" href="/dashboard/weeks/3/days/4?locale=fr">
                                        Jeu
                                            <i class="fa fa-rocket text-danger" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Projet à rendre ce jour-là"></i>

</a>                                </li>
                                <li>
                                    <a style="left:600px;" href="/dashboard/weeks/3/days/5?locale=fr">
                                        Ven
                                            <i class="fa fa-pencil text-success" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Corrections cette journée là" ></i>


</a>                                </li>
                    </ol>
                </div>
                </div>
            </div>
            </div>
        </div>
        </div>
    </div>
    </div>
<div>
  </div>

  <!-- Les fameuses corrections qui n'arrivnet que les jours concernés -->


    <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #5E66E5 " >
          <h1>Cours : Un dossier Ruby bien rangé</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          <h2>1. Introduction</h2>
<p>Quand on fait de la programmation, il faut un dossier bien rangé, des programmes qui appellent les bons. Ainsi les gens qui débarquent dans ton dossier ne seront pas perdus. Dans cette ressource nous allons voir comment bien ranger un dossier.</p>

<p>Arriver dans un repo où y'a des fichiers partout et où c'est le bordel, cela ne fait jamais plaisir : la personne ne comprend rien, et il faut passer plus de temps à expliquer son programme qu'à le modifier. Ainsi, Ruby a une convention qui permet d'organiser la structure d'un dossier Ruby.</p>


<h2>2. Historique</h2>
<p>Étant donné que dans la POO il y a des milliers de fichiers dans tous les sens, on a rapidement commencé à tout bien ranger.</p>

<h2>3. La ressource</h2>



<h3>3.1. Structure de dossier conventionnelle</h3>

<p>Imaginons que tu veuilles faire un programme qui scrappe des données et qui les enregistre sur un fichier CSV. Voyons la structure suivante :</p>

<pre><code class="language-shell">scrapper
│
├── .gitignore
├── README.md
├── Gemfile
├── Gemfile.lock
├── data.csv
└── scrap.rb</code></pre>


<p>En soi, elle est à peu près lisible, mais elle partira dans le grand n'importe quoi dès que tu veux ajouter des fonctionnalités (et donc des classes, et donc des fichiers) dans ton application. Et nous n'avons même pas mis les fichiers de test, indispensables pour toute application moderne. Ainsi, nous allons te montrer une structure bien plus organisée. Aucune surprise pour toi, c'est celle qu'on utilise jusque-là : </p>


<pre><code class="language-shell">mon_projet
├── lib
│   └── scrapper.rb
├── db
│   └── thing.csv
├── spec
│   ├── spec_helper.rb
│   └── scrapper_spec.rb
├── app.rb
├── README.md
├── Gemfile
├── Gemfile.lock
├── Autres fichiers (.env, .gitignore)
└── .rspec</code></pre>



<p>L'objectif est d'avoir juste à faire <code>$ bundle install</code> et <code>$ ruby app.rb</code> quand on arrive dans le dossier, pour faire tourner l'application. Chaque fichier doit avoir une fonction unique et précise, représentée par une classe. Ainsi, notre fichier <code>scrapper.rb</code> doit coder la classe <code>Scrapper</code>, qui a pour fonction de récupérer des données. Ainsi, il suffit d'appeler <code>Scrapper.new.perform</code> dans notre fichier <code>app.rb</code> pour que tout fonctionne.</p>

<p>Cette convention est beaucoup plus lisible, et permet de bien comprendre ce que fait l'application.</p>

<h3>3.2. Quelques réglages</h3>
<p>Afin de faire marcher le dossier, il y a bien entendu quelques réglages à faire. Déjà, il faut brancher le Bundler au fichier <code>app.rb</code> : </p>

<pre><code class="language-ruby">require 'bundler'
Bundler.require</code></pre>


<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">🚀 ALERTE BONNE ASTUCE</h4>
        <p>Ajouter ces deux lignes en tout début de programme <code>app.rb</code> : </p>        
        <pre><code class="language-ruby">require 'bundler'
Bundler.require</code></pre>
        <p>Permet de dire à Ruby "hey, fais un require sur toutes les gems de mon Gemfile STP, comme ça, ça m'évitera de les appeler tous les deux fichiers". Une commande très pratique pour éviter des longues listes de <code>require</code> en haut de chaque classe. Seul un bon vieux <code>$ bundle install</code> suffira dans le terminal.</p>
        <p>=> Grâce à ces deux lignes en en-tête du fichier à exécuter (<code>ruby app.rb</code>), les require de gems deviennent inutiles. Il suffit que ton Gemfile soit bien complété.</p>
    </div>
  </div>
</div>


<p>Ensuite, il faut mettre les bons require au bon endroit pour que les fichiers s'appellent entre eux. On pourrait mettre des lignes comme celles-ci :</p>

<pre><code class="language-ruby">require 'lib/my_folder/file'
require 'lib/scrapper'
etc</code></pre>

<p>Mais cette technique manque un chouïa d'élégance, on peut dire facilement à Ruby "hey, tout ce qui est dans le dossier ou dans un sous-dossier de <code>lib</code>, mets-les dans le PATH comme ça j'aurai juste besoin de faire <code>require 'NomDeClass'</code> sans me taper tout le chemin-dossier du fichier". <br>
C'est possible avec la ligne : <code>$:.unshift File.expand_path("./../lib", __FILE__)</code>. Tu peux en lire plus sur cette méthode <a href="https://stackoverflow.com/questions/4474918/file-expand-path-gemfile-file-how-does-this-work-where-is-the-fil"> dans la première réponse ici</a>. Ainsi, les lignes de require vont ressembler à ceci :</p>

<pre><code class="language-ruby">$:.unshift File.expand_path("./../lib", __FILE__)
require 'scrapper' #plus besoin de préciser le path exact</code></pre>

<p>Et puis enfin, tu as juste à appeler la classe qui t'intéresse avec <code>MyClass.new.perform</code>. Ainsi, ton fichier <code>app.rb</code> va ressembler à ceci :</p>

<pre><code class="language-ruby">require 'bundler'
Bundler.require

$:.unshift File.expand_path("./../lib", __FILE__)
require 'scrapper'

MyClass.new.perform</code></pre>

<p>Et là, tu as un dossier qui ressemble à quelque chose pour ton application.</p>


<h3>3.3. Et si mon app fait plusieurs choses à la fois ?</h3>
<p>C'est une excellente question. Prenons l'exemple d'une application qui récupère des e-mails, qui les enregistre, et qui envoie des e-mails à partir d'un fichier CSV. Tu n'as peut-être pas envie que ton application fasse tout à la fois quand tu exécutes le fichier <code>app.rb</code>, ainsi, ce fichier va te servir de chef d'orchestre, et alterner entre les différents services de ton application. L'application tournera en boucle (jusqu'à ce que l'utilisateur fasse <code>CTRL</code> + <code>C</code>) et appellera les bonnes classes en fonction des inputs de l'utilisateur.</p>

<p>Par exemple, l'application à son démarrage, va appeler la classe <code>Index</code>, qui a pour but de demander ce que l'utilisateur veut faire. En fonction de son input, elle appellera la bonne classe (<code>Scrapper</code>, <code>EmailSender</code>, etc), puis elle affichera la classe <code>Done</code>, qui dira "Hey, c'est terminé !". Et elle demandera à l'utilisateur ce qu'il veut faire.</p>

<p>Les classes <code>Index</code> et <code>Done</code> sont des classes qui ont pour but unique d’interagir avec l'utilisateur en lui donnant une interface visuelle. Par convention, nous appelons ces classes des <b>views</b>, qui seront rangées dans un dossier du même nom. Ainsi, notre dossier ressemblera à ceci :</p>


<pre><code class="language-shell">mon_projet
├── lib
│   ├── app
│   │   ├── scrapper.rb
│   │   └── email_sender.rb
│   └── views
│       ├── done.rb
│       └── index.rb
├── db
│   └── thing.csv
├── spec
│   ├── spec_helper.rb
│   └── scrapper_spec.rb
├── app.rb
├── README.md
├── Gemfile
├── Gemfile.lock
├── Autres fichiers (.env, .gitignore)
└── .rspec</code></pre>


<p>L'avantage de ce type de structure est que tes programmes sont rangés dans des dossiers qui indiquent déjà leur utilité : base de donnée ? Générateur de vue pour l'utilisateur ? Classe apportant une fonction précise ?<br>
Souviens-toi qu'il est préférable d'avoir 100 fichiers qui font 5 lignes mais rangés de façon structurée, qu'un seul fichier avec 500 lignes.</p>

<p>Nous verrons tout ceci plus en détails lors du cours sur le MVC, un modèle d'architecture logicielle très connu et sur lequel se base Rails.</p>



<h2>4. Points importants à retenir</h2>
<p>Voici un bon exemple d'architecture logicielle Ruby :</p>

<pre><code class="language-shell">mon_projet
├── lib
│   ├── app
│   │   ├── scrapper.rb
│   │   └── email_sender.rb
│   └── views
│       ├── done.rb
│       └── index.rb
├── db
│   └── thing.csv
├── spec
│   ├── spec_helper.rb
│   └── scrapper_spec.rb
├── app.rb
├── README.md
├── Gemfile
├── Gemfile.lock
├── Autres fichiers (.env, .gitignore)
└── .rspec</code></pre>

<p>Une telle application doit pouvoir se lancer en faisant seulement <code>$ ruby app.rb</code></p>
<p>Les lignes suivantes dans app.rb vont te permettre d'éviter les require de gem : </p>

<pre><code class="language-ruby">require 'bundler'
Bundler.require</code></pre>

<p>Les lignes suivantes dans app.rb vont te permettre d'appeler facilement les autres fichiers de classe</p>
<pre><code class="language-ruby">$:.unshift File.expand_path("./../lib", __FILE__)
require 'app/fichier_1'
require 'views/fichier_2'</code></pre>



<h2>5. Pour aller plus loin</h2>
<p>Pas besoin pour le moment.</p>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #5E66E5 " >
          <h1>Cours : Enregistrer ses données dans un fichier qui gère les tableaux</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          <h2>1. Introduction</h2>
<p>Prenons l'exemple de ton scrappeur : à chaque fois que tu le lances, ce dernier n'enregistre pas les données quelque part, et ces dernières sont perdues à tout jamais lorsque tu fermes ton terminal. Et si l'on t'apprenait à enregistrer des données dans un fichier ?</p>

<p>Dans cette ressource nous allons te montrer trois formats très cools pour le stockage de données :</p>

<ul>
  <li>le format JSON, très répandu sur le Web,</li>
  <li>les fichier Google Spreadsheet, pour t'aider à t'automatiser des tâches en conjugant Ruby et Spreadsheet,</li>
  <li>le format CSV, très connu aussi pour les données.</li>
</ul>

<h2>2. Historique</h2>
<p>Heu..</p>


<h2>3. La ressource</h2>
<h3>3.1. JSON</h3>
<p>Le format JSON est un format de fichier qui permet de sauvegarder, pour réutiliser plus tard, des données telles que des hash, ou des arrays. JSON a l'avantage d'être lisible par un humain, et par tout langage de programmation. <a href="https://www.w3schools.com/js/js_json_intro.asp" target="_blank">W3Schools a fait un rapide récap</a> à ce sujet</p>

<p>Découvre comment lire un fichier JSON avec <a href="https://www.tutorialspoint.com/json/json_ruby_example.htm" target="_blank" >ce tutoriel sympathique</a>. Enfin, <a href="https://stackoverflow.com/a/5507535/8564105" target="_blank" >cette réponse</a> mentionne comment écrire un fichier JSON à partir d'un objet Ruby.</p>

<h3>3.2. Google Spreadsheet</h3>

<p>Commence par découvrir la <a href="https://github.com/gimite/google-drive-ruby" target="_blank">gem google_drive</a> de Ruby. Puis essaie de suivre la partie <i>How to use</i>, notamment la sous-partie <a href="https://github.com/gimite/google-drive-ruby#example-to-readwrite-spreadsheets" target="_blank">Example to read/write spreadsheets</a>, pour faire marcher ton premier fichier spreadsheet.</p>

<p>La première fois que l'on se branche à l'API de Google Drive, on se butte au fait qu'elle n'est pas simple à gérer. Heureusement, les gens de la gem ont alimenté leur doc avec <a href="https://github.com/gimite/google-drive-ruby/blob/master/doc/authorization.md" target="_blank">un tutoriel sur comment se brancher à l'API de Google Drive</a>. Suis-le donc 😉</p>

<h3>3.3. CSV</h3>
<p>CSV signifie "Comma-Separated Values" ou "Valeur Séparées par une Virgule". Ce format est très populaire pour représenter des tableaux : chaque ligne du CSV est une ligne de tableau, et chaque contenue d'une colonne est séparé par une virgule. Au final, un fichier CSV ressemble à ceci :</p>

<pre><code class="language-csv">1,chocolate,brown
2,bacon,pink
3,apple,red
4,banana,yellow
5,almonds,brown</code></pre>
<p>Ici les 3 colonnes pourraient avoir pour titre "Line number", "Food" et "Color". </p>

<p>RubyGuides ont fait <a href="https://www.rubyguides.com/2018/10/parse-csv-ruby/" target="_blank">un chouette tutoriel</a> qui t'explique comment interagir avec un fichier CSV. Comme tu peux le voir, CSV est intégré à Ruby, tu peux donc <a href="https://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html" target="_blank">lire la doc</a> qui te donnera toutes les méthodes pour jouer avec des CSV.</p>

<h2>4. Points importants à retenir</h2>
<p>Tu as vu trois façons de sauvegarder des tableaux de façon pérenne :</p>

<ul>
  <li>JSON</li>
  <li>Google Spreadsheet</li>
  <li>CSV</li>
</ul>

<h2>5. Pour aller plus loin</h2>
<p>Avec Ruby les possibilités sont énormes, mais déjà c'est pas mal là. On verra les bases de données (qui ne sont que des gros tableaux finalement) la semaine prochaine.</p>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>


  <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #FF4081 " >
          <h1>Projet : Sauvegarder des données en masse</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          <h2>1. Introduction</h2>
<p>Ensemble, nous allons sauvegarder tout un tas de données dans une base sous la forme d'une spreadsheet, d'un CSV ou d'un JSON. Tous les programmes du jour devront être faits en POO : tout doit être contenu dans des classes, 1 classe par fichier. Finis les petits programmes faits à la va-vite.</p>



<h2>2. Le projet</h2>
<p>Note pour les tests : aujourd'hui exceptionnellement pas de test ☺</p>
<p>Le projet du jour a pour but d'enregistrer dans 3 formats différents les e-mails du Val d'Oise (tu te rappelles bien sûr de ce projet, hein ?). Pour ce faire, reprends le programme que tu avais fait précédemment et mets dans une belle classe. Bien entendu (et cela vaudra pour TOUS les projets à venir), ton programme sera inclus dans un dossier bien structuré.</p>
<p>A chaque format, tu vas créer une méthode spécifique pour enregistrer le résultat de ton scrappeur.</p>

<h3>2.1. Enregistrer dans un JSON</h3>
<p>Tu voudrais éviter de faire tourner ton scrappeur à chaque fois que tu reboots ton ordi : il faut en sauvegarder les données ! JSON étant un format standard, tu décides de le faire sous un fichier <code>emails.JSON</code>.</p>
<p>Créé une méthode <code>save_as_JSON</code> qui prend le résultat de ton scrapper et enregistre dans ton ordi les emails du Val d'Oise. Si tu as enregistré le résultat de ton scrapping au format suivant : <code>{"ABLEIGES"=&gt;"mairie.ableiges95@wanadoo.fr", "AINCOURT"=&gt;"mairie.aincourt@wanadoo.fr", etc }</code>, il te faut passer sur chaque couple clé-valeur du hash. À chaque passage, tu vas ajouter du contenu dans ton fichier JSON.</p>

<p>On te laisse utiliser les ressources du jour pour produire un joli JSON.</p>


<h3>2.2. Google Spreadsheet</h3>

<p>À présent, c'est le CEO de Get-Email Corp qui voudrait que tu puisses lui envoyer tes résultats par e-mail. Cependant, ce dernier est un peu old school : il ne comprend pas comment obtenir la liste d’e-mails à partir d'un fichier <em>scrapping.rb</em>, ne pige rien au format JSON et refuse de suivre The Hacking Project. Comme le client est roi, la seule façon de lui fournir ces e-mails est de le faire via un fichier Google Spreadsheet. Ta mission est donc de trouver un moyen de faire un fichier Google Spreadsheet qui contienne en <em>colonne A</em> les noms des villes, et en <em>colonne B</em> les e-mails des dites mairies.</p>

<p>Nous te conseillons de travailler sur un fichier spreadsheet que tu vas créer pour l'occasion. <a href="https://github.com/gimite/google-drive-ruby#example-to-readwrite-spreadsheets" target="_blank" class="text-primary">Ces quelques lignes de code</a> t'indiquent comment ouvrir un spreadsheet à partir de Ruby.</p>

<p>Tout ce travail de sauvegarde se fera via une méthode <code>save_as_spreadsheet</code></p>

<h3>2.2. Enregistrer dans un CSV</h3>

<p>Une fois le résultat livré à Get-Email Corp, tu te sens l'âme d'un Julien Assange et tu veux balancer le fichier sur jeux-video.com. La communauté t'incite fortement à le faire en CSV (et toi, t'es très sensible à ce que la communauté veut).</p>

<p>Enregistre maintenant les données dans un CSV grâce à une méthode <code>save_as_csv</code></p>


<h2>3. Rendu attendu</h2>
<p>Un dossier qui scrappe les mairies et qui les enregistre dans les trois types vus aujourd'hui. La structure devrait ressembler à ceci :</p>

<pre><code class="language-shell">mon_projet
├── lib
│   ├── app
│   │   └── scrapper.rb
├── db
│   └── emails.csv
│   └── emails.json
├── spec
│   ├── spec_helper.rb
│   └── scrapper_spec.rb
├── app.rb
├── README.md
├── Gemfile
├── Gemfile.lock
├── Autres fichiers (.env, .gitignore)
└── .rspec</code></pre>

<p>Tu peux rajouter un petit menu si tu veux pour laisser le choix du format-cible à l'utilisateur.</p>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>



</div>


  </div>
</div>
    <script src="/packs/dashboard-031178fac0de4f91cbcc.js"></script>
    

    <script charset="utf-8">
      $('input[name=authenticity_token]').val($('meta[name=csrf-token]').attr('content'));
    </script>

  </body>
</html>

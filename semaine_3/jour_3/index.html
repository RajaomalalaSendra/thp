<!DOCTYPE html>
<html class="loading" lang="fr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../../style/bootstrap.css">
    <title>The hacking project offline</title>
  </head>
  <body class="vertical-layout vertical-menu 2-columns  menu-expanded fixed-navbar" data-open="click" data-menu="vertical-menu" data-color="bg-gradient-x-primary-blue" data-col="2-columns">
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <h1 class="navbar-brand">THE HACKING PROJECT</h1>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarColor01">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="../../">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../../features">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../../about">About</a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search">
            <button class="btn btn-secondary my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
      </nav>
<div class="container">
    <a type="button" class="btn btn-dark" href="../../semaine_1/">Semaine 1</a>
    <a type="button" class="btn btn-dark" href="../../semaine_2/">Semaine 2</a>
    <a type="button" class="btn btn-dark btn-lg" href="../../semaine_3/">Semaine 3</a>
    <a type="button" class="btn btn-dark" href="../../semaine_4/">Semaine 4</a>
    <a type="button" class="btn btn-dark" href="../../semaine_5/">Semaine 5</a>
    <a type="button" class="btn btn-dark" href="../../semaine_6/">Semaine 6</a> 
</div>
<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="content-header row"></div>
    
      <div class="container">
    <div class="card">
  <div class="card-header">
    <h4 class="text-center"> Programme jour par jour</h4>
  </div>
  <div class="card-body">
    <div class="text-center">
    <a href="../../semaine_3">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
        <i class="fa fa-terminal"></i>&nbsp;&nbsp;&nbsp;Lun
      </button>
</a>    <a href="../../semaine_3/jour_2">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
        <i class="fa fa-code"></i>&nbsp;&nbsp;&nbsp;Mar
      </button>
</a>    <a href="../../semaine_3/jour_3">
      <button class="btn btn-secondary btn-outline-dark btn-lg mr-4">
        <i class="fa fa-desktop"></i>&nbsp;&nbsp;&nbsp;Mer
      </button>
</a>    <a href="../../semaine_3/jour_4">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
      <i class="fa fa-folder-open"></i>&nbsp;&nbsp;&nbsp;Jeu
      </button>
</a>    <a href="../../semaine_3/jour_5">
      <button class="btn btn-secondary btn-outline-dark btn mr-4">
      <i class="fa fa-bullhorn"></i>&nbsp;&nbsp;&nbsp;Ven
      </button>
</a>    </div>
  </div>
</div>


<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-wrapper-before"></div>
    <div class="content-header row"></div>
    
      
<div class="content-body">
      <h2 class="text-center">MVC - Ruby Version</h2>
      <h4 class="text-center">Programmation OrientÃ©e Objet</h4>
  <div class="row">
     <div class="col-xl-3 col-lg-6 col-md-12">
  <div class="card">
    <div class="card-content">
      <div class="card-body">
        <div class="media d-flex">
          <div class="align-self-top">
              <i class="ft-calendar icon-opacity info font-large-4"></i>
          </div>
          <div class="media-body text-right align-self-bottom mt-3">
              <span class="d-block mb-1 font-medium-1"></span>
              <h3 class="info mb-0">
                 Jour 24 / 55</h3>
          </div>
        </div>
        <div class="progress progress-sm mt-1 mb-0 box-shadow-2">
            <div class="progress-bar bg-gradient-x-info" role="progressbar" style="width: 43%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="120">
            </div>
        </div>
      </div>
    </div>
  </div>
 </div>


    <div class="col-xl-3 col-lg-6 col-md-12">
  <div class="card">
    <div class="card-content">
      <div class="card-body">
        <div class="media d-flex">
          <div class="align-self-top">
            <i class="ft-heart icon-opacity danger font-large-4"></i>
          </div>
          <div class="media-body text-right align-self-bottom mt-3">
            <span class="d-block mb-1 font-medium-1">Jokers restant</span>
            <h3 class="danger mb-0">
                3
            </h3>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

    <div class="col-xl-3 col-lg-6 col-md-12">
    <div class="card">
        <div class="card-content">
            <div class="card-body">
                <div class="media d-flex">
                    <div class="align-self-top">
                        <a href="/dashboard/assignments?locale=fr">
                           <i class="ft-fast-forward icon-opacity warning font-large-4"></i>
</a>                    </div>
                    <div class="media-body text-right align-self-bottom mt-3">
                        <span class="d-block mb-1 font-medium-1">Missions</span>
                            <div class="badge border-danger danger badge-border">Pas inscrit</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

  </div>
  <div class="row">
        <div class="container">
    <div class="col-xl-12 col-lg-12 col-md-12">
    <div class="card">
        <div class="card-header">
        <h1 >Programmation OrientÃ©e Objet
                <i class="fa fa-beer text-warning"></i>
        </h1>
        
        </div>
        <div class="card-content">
        <div class="card-body">
            <div class="card-text">
            <h2 class="text-center">MVC - Ruby Version</h2>
            <div class="cd-horizontal-timeline loaded">
                <div class="timeline">
                <div class="events-wrapper">
                    <div class="events" style="width: 1800px;">
                    <ol>
                                <li>
                                    <a style="left:120px;" href="/dashboard/weeks/3/days/1?locale=fr">
                                        Lun
                                            <i class="fa fa-beer text-warning" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Rendez-vous pour boire un coup"></i>

</a>                                </li>
                                <li>
                                    <a style="left:240px;" href="/dashboard/weeks/3/days/2?locale=fr">
                                        Mar
                                            <i class="fa fa-rocket text-danger" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Projet Ã  rendre ce jour-lÃ "></i>

</a>                                </li>
                            <li>
                                <a class="selected" style="left:360px;" data-toggle="tooltip" data-placement="top" title="MVC - Ruby Version" href="/dashboard/weeks/3/days/3?locale=fr">
                                    Mer
                                        <i class="fa fa-pencil text-success" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Corrections cette journÃ©e lÃ " ></i>


</a>                                </li>
                                <li>
                                    <a style="left:480px;" href="/dashboard/weeks/3/days/4?locale=fr">
                                        Jeu
                                            <i class="fa fa-rocket text-danger" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Projet Ã  rendre ce jour-lÃ "></i>

</a>                                </li>
                                <li>
                                    <a style="left:600px;" href="/dashboard/weeks/3/days/5?locale=fr">
                                        Ven
                                            <i class="fa fa-pencil text-success" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Corrections cette journÃ©e lÃ " ></i>


</a>                                </li>
                    </ol>
                </div>
                </div>
            </div>
            </div>
        </div>
        </div>
    </div>
    </div>
<div>
  </div>

  <!-- Les fameuses corrections qui n'arrivnet que les jours concernÃ©s -->


    <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #5E66E5 " >
          <h1>Cours : MVC</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          
<h3>1. Introduction</h3>
<p>Dans cette ressource, tu vas voir ce qu'est que la fameuse architecture MVC. Nous t'expliquerons ce qu'elle veut dire, comment s'en servir, oÃ¹ elle est utilisÃ©e, et enfin pourquoi l'utiliser.</p>

<p>Si l'on devait rÃ©sumer le MVC en une phrase, la voiciÂ : <br>
<b>le MVC, acronyme de Model-View-Controller, est un modÃ¨le d'architecture de logiciel orientÃ© objet qui le dÃ©compose en 3 grosses composantesÂ : une qui gÃ¨re l'accÃ¨s Ã  la base de donnÃ©es (Model), une qui gÃ¨re les interactions avec l'utilisateur (View), et une qui fait le rÃ´le de chef d'orchestre de tout cela (Controller)</b>.</p>

<h3>2. Historique</h3>
<p>Avec la complexification constante des programmes dans les annÃ©es 70, les informaticiens se sont dit que ranger le code dans des dossiers bien foutus, Ã§a ne suffisait plus. Il fallait trouver une convention pour dÃ©couper un gros programme en briques logiques (des sous-programmes) afin que ce soit plus lisible et moins le bordel. C'est lÃ  qu'intervint Trygve Reenskaug.</p>

<p>En 1978, lors d'une visite au trÃ¨s cÃ©lÃ¨bre <a href="https://fr.wikipedia.org/wiki/Palo_Alto_Research_Center" class="text-primary" target="_blank">Palo Alto Research Center</a> (PARC), l'informaticien norvÃ©gien y prÃ©senta un modÃ¨le d'architecture logicielle adaptÃ© Ã  leur concept naissant d'interface graphique (Ã§a n'existait pas encore Ã  l'Ã©poque). Ce premier jet de l'architecture MVC concernait un langage de programmation orientÃ© objet qui s'appelle SmallTalk. Citons-le lors de la crÃ©ation du MVC : </p>

<blockquote class="blockquote pl-1 border-left-primary border-left-3">
  <p class="mb-0">MVC was conceived as a general solution to the problem of users controlling a large and complex data set. The hardest part was to hit upon good names for the different architectural components. Model-View-Editor was the first set. After long discussions, particularly with Adele Goldberg, we ended with the terms Model-View-Controller.</p>
  <footer class="blockquote-footer">Trygve Reenskaug</footer>
</blockquote>

<p>Le modÃ¨le du MVC connut un grand succÃ¨s vers le milieu des annÃ©es 90 avec l'introduction de WebObjects. Java s'y est mis plus tard, ce qui a aidÃ© Ã  sa popularitÃ©. Enfin, le milieu des annÃ©es 2000 a vu sa popularitÃ© croÃ®tre auprÃ¨s de cibles moins "corpo" puisque la crÃ©ation de Django en juillet 2005 (basÃ© sur un modÃ¨le trÃ¨s proche, le MTV) et de Ruby on Rails en dÃ©cembre 2005 ont permis au MVC de passer au rang de superstar dans l'architecture logicielle du web.</p>

<p>Aujourd'hui, le MVC est le framework d'architecture de sites le plus utilisÃ© sur Internet.</p>

<h3>3. La ressource</h3>
<h4>3.1. Pourquoi se servir du MVC ?</h4>
<p>Imagine que tu fais une application complexe qui envoie des e-mails aux mairies. Nous pourrions Ã©crire tout le code dans un fichier qui s'appelle <code>townhall_email.rb</code>. Le souci est que ce fichier se retrouverait avec beaucoup trop de lignes, et travailler Ã  plusieurs dessus serait vite complexe. Maintenant imagine un projet encore plus grand, comme le site web de The Hacking Project. Il est hors de question d'avoir un fichier app.rb qui fait 200Â 000 lignesÂ : le maintenir serait l'enfer sur Terre. OK, mais comment le dÃ©couperÂ ? Faire 1 classe pour 1 fonctionnalitÃ©, ne suffit gÃ©nÃ©ralement pas.</p>

<p>C'est pour cela que les architectures logicielles ont Ã©tÃ© crÃ©Ã©esÂ : pour dÃ©couper son programme en diffÃ©rents fichiers bien rangÃ©s selon un schÃ©ma prÃ©cis. Ainsi, sans mÃªme avoir Ã  lire le code de chaque fichier, on peut savoir globalement son rÃ´le dans le programme. Il existe plusieurs faÃ§ons d'architecturer une application, mais pour le web, le MVC est trÃ¨s populaire. <br>
Ã€ partir de maintenant, ne te laisse plus impressionner quand on te parle d'architecture logicielleÂ : il s'agit juste de dÃ©couper intelligemment un programme en plein de sous-programmesâ€¦</p>

<p>Une fois l'architecture choisie, le code de ton programme est alors rangÃ© dans plein de fichiers rangÃ©s en catÃ©gories, chacun a son utilitÃ©, et il est alors facile (quand on connaÃ®t le framework) de savoir lequel modifier dans un cas donnÃ©.</p>

<h4>3.2. Model - View - Controller</h4>
<p>Voici un schÃ©ma qui reprÃ©sente le fonctionnement de l'archi MVC :</p>
<img src="https://i.imgur.com/411m4Ch.png" class="img-fluid">
<h5>Ã‰tape 1Â : Le Routeur</h5>

<p> L'utilisateur va aller sur l'application en saisissant une URL (= une adresse web). Le routeur, qui reÃ§oit cette URL, s'occupe de router (TiensÂ ! Comme son nom est bien choisiÂ !) l'utilisateur vers le bon endroit, Ã  l'image d'un aiguilleur qui dirigerait un train vers la bonne route. Par exemple, si l'utilisateur va sur la page facebook.com/mes_messages, le routeur va rediriger sa requÃªte au controller qui s'occupe d'afficher tout ce qui est relatif aux messages. Si l'utilisateur Ã©tait allÃ© sur facebook.com/mon_profil, le routeur aurait redirigÃ© la requÃªte au controller qui s'occupe d'afficher ce qui est relatif aux profils.</p>
<p>Donc <b>le routeur redirige l'utilisateur vers le bon controller (qui n'est autre qu'une classe Ruby)</b>. <br>
  Mais plusieurs URLs peuvent pointer vers un mÃªme controller. Par exemple toutes les URLs suivantes vont pointer vers le controller en charge d'afficher ce qui est relatif aux messages : 
  <ul>
    <li>facebook.com/mes_messages => affichage des messages reÃ§us</li>
    <li>facebook.com/nouveau_message => rÃ©daction d'un message</li>
    <li>facebook.com/messages_envoyÃ©s => affichage des messages envoyÃ©s</li>
  </ul>  
  Du coup, le routeur va devoir Ãªtre plus spÃ©cifique que de simplement pointer vers un controller. Au final, il va rediriger l'utilisateur vers une mÃ©thode <u>prÃ©cise</u> du controller des messages.</p>

<h5>Ã‰tape 2Â : Le Controller</h5>
<p>En poursuivant sur l'exemple de la page facebook.com/mes_messagesÂ : l'utilisateur va s'attendre, en tapant cette URL, Ã  voir s'afficher sur son navigateur tous les messages de sa boite de rÃ©ception. <br>
  Il saisit l'URL, le routeur l'analyse et le renvoie vers une mÃ©thode prÃ©cise du controller des messagesÂ : la mÃ©thode <code>show_messages</code>. Cette mÃ©thode aura 2 rÃ´les qui rÃ©sument bien la raison d'Ãªtre d'un controllerÂ :
<ol>
  <li>RÃ©cupÃ©rer les informations de la base de donnÃ©es qu'il faut afficher (la liste des messages avec leur titre, l'expÃ©diteur, la date de rÃ©ception, etc.). <b>Pour cela, il va faire une demande au model, dont le rÃ´le est dâ€™interagir avec la base de donnÃ©es</b>.</li>
  <li>Une fois les informations rÃ©cupÃ©rÃ©es du model, <b>le controller les envoie Ã  la view correspondant Ã  la mÃ©thode <code>show_messages</code></b>. Cette view va construire une jolie page HTML qui sera renvoyÃ©e Ã  l'utilisateur.</li>
</ol></p>

<h5>Ã‰tape 3Â : Le Model</h5>
<p> Le model est une autre classe Ruby qui va avoir pour rÃ´le d'interagir avec la base de donnÃ©es sur demande du controller. GÃ©nÃ©ralement, il s'agit pour lui de rÃ©cupÃ©rer des informations (qui doivent ensuite Ãªtre affichÃ©es Ã  l'utilisateur) sous la forme d'objets. Par exemple pour la page facebook.com/mes_messages, le controller va demander au model <code>Message</code> de lui retourner une liste des objets de la classe Message en ne sÃ©lectionnant que ceux doivent apparaÃ®tre dans la boite de rÃ©ception de l'utilisateur. <b>Le ModÃ¨le va piocher dans la base de donnÃ©es et renvoyer des objets de la classe <code>Message</code>, chacun Ã©tant liÃ© Ã  ses variables d'instance, par exemple un texte, un titre, un expÃ©diteur, une date d'envoi, etc.</b></p>

<p>Un autre cas frÃ©quent est qu'un controller demande au modÃ¨le de crÃ©er un message en base de donnÃ©es. C'est encore le model qui va s'occuper de cela, via une requÃªte SQL qui n'aura mÃªme pas Ã  Ãªtre codÃ©e par vous (c'est lÃ  toute l'utilitÃ© du model).</p>

<p>Une fois l'opÃ©ration effectuÃ©e par le model, le controller reprend la main. Dans notre exemple sur facebook.com/mes_messages, le model va renvoyer un array <code>@messages</code> qui contient tous les objets de classe <code>Message</code> qu'il faut afficher dans la boite de rÃ©ception.</p>

<h5>Ã‰tape 4Â : La View</h5>
<p>Une fois que le controller a toutes les informations Ã  afficher, il les rend disponibles Ã  une derniÃ¨re classe RubyÂ : la view. Celle-ci a pour rÃ´le de <b>construire du HTML avec les informations envoyÃ©es par le controller</b>, HTML qui sera ensuite affichÃ© sur le navigateur web de notre utilisateur. Dans notre exemple, si le controller nous envoie l'array <code>@messages</code>, la view pourra facilement parcourir cet array avec un petit <code>@messages.each do</code> et pour chaque objet de classe <code>Message</code> contenu dans l'array, elle va afficher une ligne dans la boite de rÃ©ception de notre utilisateur.</p>

<p>Le controller peut rendre plusieurs objets disponibles Ã  la view (tant qu'il en a fait la demande au bon model). Ainsi, on aurait pu avoir un objet <code>@current_user</code> de classe <code>User</code> qui correspond Ã  l'utilisateur actuellement connectÃ©. Avec cet objet, la view peut afficher facilement un <code>@current_user.name</code> qui retourne son nom et permet d'Ã©crire un truc du genre <code>"Voici ta boite de rÃ©ception FÃ©lixÂ !"</code>.</p>

<p>Une fois la page HTML affichÃ©e, le tour est jouÃ©Â ! Il ne reste plus qu'Ã  attendre un clic de l'utilisateur sur un lien. En cliquant, il indique "je veux aller sur cette URL" => l'URL est envoyÃ©e au routeur => le routeur renvoie vers la bonne mÃ©thode du bon controller => etc. La boucle est bouclÃ©e, la routourne a tournÃ©. </p>

<h5>En rÃ©sumÃ©</h5>

<p>Le routeur redirige, en fonction de ce que fait l'utilisateur (= quelle URL il choisit) vers la bonne mÃ©thode du bon controller (= le chef d'orchestre de tout cela). Puis le controller va demander Ã  un model de rÃ©cupÃ©rer en base de donnÃ©es les informations nÃ©cessaires. Ces informations sont ensuite renvoyÃ©es Ã  une view pour qu'elle puisse construire la page HTML qu'on envoie Ã  notre utilisateur. </p>


<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">ğŸ¨ EXEMPLE ILLUSTRÃ‰</h4>
      <p class="card-text">Pour bien visualiser le modÃ¨le MVC, on va te donner un exemple concret : celui d'un restaurant et de ses employÃ©s.
      <ul>
        <li>Le manager du restau (qui veut tout valider et tout savoir)Â : c'est le ControllerÂ ;</li>
        <li>La cuistot serait le ModelÂ ;</li>
        <li>Le serveur qui apporte les plats, serait la ViewÂ ;</li>
        <li>La serveuse qui prÃ©sente le menu et prend les commande, serait le Routeur.</li>
      </ul>
      Tu entres dans le restaurant et t'assois Ã  une tableÂ : la serveuse-Routeur vient alors te prÃ©senter le menu et prend ta commande. <br>Elle transmet l'info au manager-Controller (oui, ce manager veut TOUT savoir). Le Controller va alors demander au cuistot-Model de prÃ©parer le plat demandÃ©. <br>
      Une fois fait, le Model donnera le plat au Controller, qui ordonnera au serveur-View de vous l'apporter. <br>
      Une fois le plat consommÃ©, vous pouvez Ã©ventuellement vouloir continuer le repasÂ : la serveuse reviendra avec le menu, etc.</p>
    </div>
  </div>
</div>

<h4>3.3 Quelques rÃ¨gles de base pour bien rÃ©ussir vos Model - Controller - View</h4>
<p>On va te donner quelques rÃ¨gles Ã  avoir en tÃªte quand tu construiras un programme en MVC. Pour le moment cela ne te servira pas, mais c'est bien de s'en imprÃ©gner au dÃ©butÂ : </p>

<ul>
  <li>Le MVC a une philosophie de "fat models, skinny controllers". Câ€™est-Ã -dire qu'il est prÃ©fÃ©rable de faire des controllers avec le moins de code possible, quitte Ã  tout mettre dans le model.</li>
  <li>Les controllers (qui sont des classes Ruby) seront remplis de mÃ©thodes. Il faut au maximum que ces mÃ©thodes correspondent Ã  celles d'un "CRUD" (Create, Read, Update, Destroy) et Ã©viter d'en rajouter d'autres, quitte Ã  crÃ©er plus de controllers. </li>
  <li>Il faut que ton code soit DRY (Don't Repeat Yourself)Â : n'Ã©crit jamais plus de deux fois la mÃªme choseâ€¦ Au bout de la 3Ã¨me fois, c'est que le bout de code que tu rÃ©pÃ¨tes peut Ãªtre mis dans un endroit (une mÃ©thode par exemple) auquel tu fais appel en une seule ligne. </li>
  <li> Le DRY est primordial pour les views. La majoritÃ© du temps, les views utilisent du code qui est rÃ©pÃ©tÃ© Ã  plusieurs endroits. Par exemple le header ou le footer, que l'on retrouve partout, peuvent Ãªtre mis dans un fichier "header" et Ãªtre appelÃ© en une ligne par chaque view.</li>
  <li>Comme les models jouent avec la base de donnÃ©es, et qu'une base de donnÃ©es propre est crucial pour toute application web, la construction des models peut prendre beaucoup de temps comparÃ© au reste. BÃ¢cler ses models, c'est aller au-devant de gros problÃ¨mes Ã  moyen terme.</li>
</ul>

<p>Nous reviendrons plus tard sur ces rÃ¨gles de base.</p>

<h3>4. Points importants Ã  retenir</h3>
<p>Le MVC a Ã©tÃ© crÃ©Ã© afin de pouvoir gÃ©rer des interfaces graphiques et des bases de donnÃ©es. C'est un modÃ¨le d'architecture logicielle utilisÃ© par la majoritÃ© des sites internet. Il ne peut Ãªtre appliquÃ© qu'aux langages orientÃ©s objets.</p>

<p>MVC veut dire Model View ControllerÂ : il dÃ©composera ton app en trois grosses composantes.</p>
<ul>
  <li>une qui gÃ¨re la base de donnÃ©es (Model) â€“ en y ajoutant, supprimant ou rÃ©cupÃ©rant les bonnes informations.</li>
  <li>une qui gÃ¨re les interactions avec l'utilisateur (View) â€“ en construisant les pages HTML.</li>
  <li>une qui fait le rÃ´le de chef d'orchestre de tout cela (Controller) â€“ en faisant le lien entre chaque composant.</li>
</ul>

<p>Le routeur redirige, en fonction de ce que fait l'utilisateur (= quelle URL il choisit) vers la bonne mÃ©thode du bon controller (= le chef d'orchestre de tout cela). Puis le controller va demander Ã  un model (= classe Ruby faisant des requÃªtes) de rÃ©cupÃ©rer en base de donnÃ©es les informations nÃ©cessaires. Ces informations sont ensuite renvoyÃ©es Ã  une view pour qu'elle puisse construire la page HTML.</p>

<h3>5. Pour aller plus loin</h3>
<p>Le projet du jour va concerner une application Ruby en MVC, mais si tu t'ennuies, tu peux aller jeter un oeil Ã  <a href="https://github.com/mindplace/ruby-todo-list" class="text-primary" target="_blank">ce repo GitHub</a>, oÃ¹ Esther a crÃ©Ã© une application de To-Do List en Ruby, utilisant le modÃ¨le du MVC.</p>

          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>


  <div class="container">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header" style="border-top: 3px solid #FF4081 " >
          <h1>Projet : The Gossip Project - The MVC POO version</h1>
          <a class="heading-elements-toggle">
          <i class="la la-ellipsis-v font-medium-3"></i>
          </a>
          <div class="heading-elements">
            <ul class="list-inline mb-0">
              <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
              <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
            </ul>
          </div> 
      </div>
      <div class="card-content collapse show">
        <div class="card-body">
          <div class="tab-pane active" id="home1" role="tabpanel">
          <h3>1. Introduction</h3>
<p>La thÃ©orie, c'est bien. La pratique, c'est mieux. Nous allons donc te proposer de mieux apprÃ©hender l'architecture du MVC en faisant une application Ruby. Cette application utilisera bien entendu le modÃ¨le du MVC, afin d'avoir du code propre, bien rangÃ©, et bien ordonnÃ©. Le projet sera un peu plus pas Ã  pas que d'habitude. C'est normal, Ã©tant donnÃ© que son premier MVC n'est jamais aisÃ©.</p>

<p>Voici l'applicationÂ : The Hacking Project est une superbe formation, avec une communautÃ© soudÃ©e. Qui dit communautÃ© soudÃ©e, dit potins Ã  tout-va. Nous allons donc crÃ©er une application qui s'appelle The Gossip Project, oÃ¹ l'utilisateur pourra rentrer les ragots et rumeur, afficher une liste des potins, puis de supprimer ceux qui ne sont plus d'actualitÃ©.</p>

<p>Les vues seront faites dans le terminal, les potins enregistrÃ©s en CSV, et le programme tournera jusqu'Ã  ce que l'utilisateur le quitte.</p>

<p>Pour cet exercice, j'ai fait le choix de CSV, mais tu peux remplacer CSV par JSON si tu es plus Ã  l'aise. Il faudra juste garder la mÃªme arborescence et la mÃªme logique. Maintenant que câ€™est dit, nous pouvons commencer.</p>

<h3>2. Le projet</h3>
<p>Note pour les testsÂ : aujourd'hui pas de tests. On veut pas t'assommer avec trop d'info.</p>

<h4>2.1. DÃ©composer le programme</h4>
<p>Avant de partir dans du code sans rÃ©flÃ©chir, nous allons penser et conceptualiser le programme. Il y aura 4 grandes parties, chacune correspondant Ã  une classe (donc un fichier) :</p>
<ul>
  <li>Le routeur</li>
  <li>Le controller</li>
  <li>La view</li>
  <li>La base de donnÃ©e (model)</li>
</ul>

<h5>2.1.1. Le routeur</h5>
<p>Le travail du routeur sera simpleÂ : c'est de demander ce que l'utilisateur veut faire. Il aura 3 choixÂ : crÃ©er un gossip, voir la liste des gossips ou supprimer un gossip. En fonction, le routeur pointera vers la bonne mÃ©thode du controller.</p>

<h5>2.2.2. Le controller</h5>
<p>Le controller servira de relai entre la view et le model. Il aura 3 mÃ©thodesÂ : une qui gÃ¨re la crÃ©ation d'un potin, une qui gÃ¨re l'affichage de la liste des potins, et une qui permet de dÃ©truire un potin. Chaque mÃ©thode devra faire le lien avec le model et la view.</p>
<h5>2.1.3. La view</h5>
<p>La view s'occupera d'afficher les bonnes informations Ã  l'utilisateur. Comme on n'a pas encore vu les systÃ¨mes de fichiers HTML (on voit Ã§a trÃ¨s bientÃ´t ğŸ˜‰), on va coder Ã§a sur le terminal avec des bons vieux <code>puts</code> en l'affichage et <code>gets.chomp</code> pour obtenir les ordres de l'utilisateur.</p>

<h5>2.1.4. Le model et la base de donnÃ©es</h5>
<p>Un potin sans son contenu, eh bien c'est comme un hamburger sans pain. Vazy cÃ© nul. Nous allons donc faire en sorte qu'un potin ait 2 attributsÂ :</p>
<ul>
  <li>son <code>content</code> qui est un string</li>
  <li>un <code>author</code> qui est aussi un string</li>
</ul>

<p>C'est tout. On aurait pu ajouter d'autres choses (la date du potin par exemple), mais pour ce premier MVC on va faire simple.</p>

<p>Au final, le model sera une classe <code>Gossip</code> qui ira piocher dans la base de donnÃ©es (le CSV) et sortira des instances de <code>Gossip</code>. Ces objets de type <code>Gossip</code> auront, tu l'as compris, 2 variables d'instanceÂ : un <code>content</code> et un <code>author</code>.</p>

<h5>2.1.5. Architecture du programme</h5>
<p>Ok, en sachant tout ceci, notre arborescence du programme va ressembler, Ã  la fin, Ã  Ã§a :</p>
<pre><code class="language-shell">.
â”œâ”€â”€ lib
â”‚    â”œâ”€â”€ controller.rb
â”‚    â”œâ”€â”€ gossip.rb
â”‚    â”œâ”€â”€ router.rb
â”‚    â””â”€â”€ view.rb
â”œâ”€â”€ db
â”‚   â””â”€â”€ gossip.csv
â”œâ”€â”€ app.rb
â”œâ”€â”€ Gemfile
â””â”€â”€ Gemfile.lock</code></pre>

<p>Jusqu'ici, rien de bien nouveau. Pour y parvenir, commenÃ§ons par le commencement, la premiÃ¨re fonctionnalitÃ©Â : l'ajout de potins.</p>

<h4>2.2. Ajouter un potin</h4>
<p>Poser les bases d'un programme, sa structure, c'est toujours le gros morceau. Pour t'Ã©viter le syndrome de la page blanche, nous allons te guider dans ta quÃªte du potin parfait.</p>

<h5>2.2.1. Les prÃ©parations</h5>
<p>Avant toute chose, tu vas crÃ©er un dossier <code>the_hacking_gossip_ruby_version_POO</code> puis te placer dedans. Tu vas ensuite crÃ©er le Gemfile, mettre la bonne version de Ruby, la gem CSV, puis tes gems prÃ©fÃ©rÃ©es (PRY pourra t'aider par exemple), et faire l'installation via Bundler.</p>

<p>Puis nous allons faire le fichier <code>app.rb</code>, porte d'entrÃ©e de notre application. Ã‰tant donnÃ© que tout passe par le router, il faut juste que son code fasse appelle Ã  la classe <code>Router</code> via un <code>Router.new.perform</code> et puis c'est tout ğŸ‘ˆ</p>

<p>Par contre, une fois Ã©crit, si tu lances ton programme, ce dernier devrait t'envoyer bouler puisque tu n'as pas encore crÃ©Ã© ta classe Router. C'est la prochaine Ã©tape.</p>

<p>L'arborescence Ã  l'instant T ressembler Ã  ceciÂ : </p>

<pre><code class="language-shell">.
â”œâ”€â”€ app.rb
â”œâ”€â”€ Gemfile
â””â”€â”€ Gemfile.lock</code></pre>
    

<h5>2.2.2. Le router</h5>
<p>Le boulot du router est proche de celui d'un serveurÂ : il propose les possibilitÃ©s Ã  notre utilisateur, et en fonction de ce que celui-ci rentre, il redirige vers la bonne mÃ©thode du controller. âœŒ</p>

<p>DÃ¨s le dÃ©but, le router va crÃ©er une instance de la classe <code>Controller</code> qu'on appellera <code>@controller</code>. C'est un peu dÃ©routant mais c'est via cette instance qu'il va dÃ©clencher la mÃ©thode adÃ©quateÂ : celle qui permet d'ajouter un potin, de le supprimer ou de les lister tous. Dans ce cas prÃ©cis, l'instance <code>@controller</code> ne te parle pas trop en termes d'objet, car on ne peut pas la rattacher Ã  un objet concret (comme un gossip, un user ou une voiture). Dis-toi juste que c'est une maniÃ¨re pour le routeur d'exÃ©cuter une mÃ©thode d'une autre classe. En faisant <code>@controller.create_gossip</code>, il passe la main Ã  la classe <code>Controller</code> en exÃ©cutant la mÃ©thode <code>create_gossip</code></p>

<p> PremiÃ¨re Ã©tape doncÂ : appeler la classe Controller avec <code>require</code>, et l'instancier (= crÃ©er une instance) Ã  l'initialize. C'est beaucoup de termes techniques, mais cela permet de commencer Ã  bien te familiariser avec les concepts de POO. D'une pierre deux coups âš¡</p>

<p>Ensuite, dans la mÃ©thode <code>perform</code>, le router va faire une boucle infinie (boucle <code>while true</code>)qui va demander ce que l'utilisateur veut faire en lui donnant plusieurs choix (on utilise ici un <code>case - when</code>, va voir sur Google comment Ã§a marche si besoin). Puisque c'est toi, nous allons te donner le code du routeurÂ : </p>

<pre><code class="language-ruby">require 'controller'

class Router

  def initialize
    @controller =  Controller.new
  end #ainsi, un "Router.new" lancÃ© par app.rb va crÃ©er automatique une instance "@controller"

  def perform #rappelle-toi que l'on fait "Router.new.perform" dans app.rb => aprÃ¨s initialize, on dÃ©finit perform.
    puts "BIENVENUE DANS THE GOSSIP PROJECT"
    while true

      #on affiche le menu
      puts "Tu veux faire quoi BG ?"
      puts "1. Je veux crÃ©er un gossip"
      puts "4. Je veux quitter l'app"
      params = gets.chomp.to_i #on attend le choix de l'utilisateur

      case params #en fonction du choix
      when 1
        puts "Tu as choisi de crÃ©er un gossip" 
        @controller.create_gossip
      when 4
        puts "Ã€ bientÃ´t !"
        break #ce "break" permet de sortir de la boucle while. C'est mÃªme la seule faÃ§on d'en sortir.
      else
        puts "Ce choix n'existe pas, merci de ressayer" #si l'utilisateur saisit une entrÃ©e non prÃ©vue, il retourne au dÃ©but du "while true". C'est pour Ã§a que la boucle est infinie: potentiellement, il peut se gourer jusqu'Ã  la fin des temps :)
      end
    end
  end
end</code></pre>

<p>Une question qui demande ce que lâ€™utilisateur veut faire, un bon vieux case, et les bonnes redirections. C'est aussi simple que cela. Maintenant si tu lances le programme, ce dernier va rÃ¢ler, car le controller n'existe pas. C'est bon signe puisque cela veut dire qu'il arrive Ã  lire le router, mais ce n'est pas encore ce que nous voulons. On va crÃ©er le controller, et commencer Ã  avoir un dÃ©but de programme. En avantÂ !</p>

<p>Ã€ ce moment-lÃ , ton code devrait ressembler Ã  ceci :</p>
<pre><code class="language-shell">.
â”œâ”€â”€ app.rb
â”œâ”€â”€ Gemfile
â”œâ”€â”€ Gemfile.lock
â””â”€â”€ lib
    â””â”€â”€ router.rb</code></pre>

<h5>2.2.3. Le controller</h5>
<p>Ce fameux chef d'orchestre. Ã‰tant donnÃ© que le controller joue avec le model et la view, tu vas devoir les <code>require</code> au dÃ©but du programme. Pour le moment la mÃ©thode <code>create_gossip</code> va juste s'amuser Ã  crÃ©er un nouvel objet Gossip avec <code>Gossip.new</code>. Nous verrons commencer pointer vers la view plus tard ğŸ˜‰</p>

<p>Idem, si tu testes ton programme, il devrait t'envoyer bouler comme d'hab, en disant que le fichier gossip n'existe pas. C'est parti, crÃ©Ã© ton fichier gossip.rb et nous allons crÃ©er en base les potins.</p>

<h5>2.2.4. Le model</h5>
<p>La classe <code>Gossip</code>, qui constituera le model, va permettre de crÃ©er plein d'instances qui seront autant de potinsÂ : enfin on revient Ã  un exemple de classe qui hÃ©berge des objets concretsÂ ! Mais le model aura aussi pour rÃ´le dâ€™interagir avec la base de donnÃ©es. Par exemple, pour la crÃ©ation, nous allons faire une mÃ©thode <code>save</code> qui ira sauvegarder dans un fichier CSV notre instance de Gossip (notre potin quoi). Cela peut faire peur, mais c'est juste quelques lignes de code.</p>

<p>DÃ©jÃ , notre potin aura deux variables d'instance qu'on mettra en <code>attr_reader</code> : ce seront le <code>author</code> et le <code>content</code>. Ces attributs seront dÃ©clarÃ©s Ã  l'initialisation de faÃ§on classique :</p>

<pre><code class="language-ruby">def initialize(author, content)
  @content = content
  @author = author
end</code></pre>

<p>On te laisse mettre les <code>attr_reader</code> aussi ğŸ™ƒ</p>

<p>Bon, grÃ¢ce Ã  ce code, on a la possibilitÃ© de faire <code>Gossip.new(author, content)</code>. C'est un bon dÃ©but, mais cela ne sauvegarde rien du tout dans notre CSV. il faudrait donc une mÃ©thode <code>save</code> qui enregistrerait dans la base de donnÃ©e l'instance de potin que l'on vient de crÃ©er. Nous allons faire cela.</p>

<p>En gros, le fonctionnement du model se passerait ainsi :</p>
<pre><code class="language-ruby">my_gossip = Gossip.new(author, content) #=> CrÃ©Ã© une instance de potin, sauvergardÃ©e juste dans cette variable
my_gossip.save #=> Sauvegarde l'instance de potin dans le CSV correspondant, en crÃ©ant une nouvelle ligne dans mon fichier CSV</code></pre>

<p>Notre base de donnÃ©es de potins sera rangÃ©e dans un fichier <code>gossip.csv</code> qui se trouve dans un dossier <code>db/</code> (cf. l'arborescence donnÃ©e au dÃ©but). Chaque ligne correspond Ã  un potin, avec en colonne 1 le <code>author</code> et en colonne 2 le <code>content</code>.</p>

<p>Maintenant, je t'invite Ã  faire en sorte que lorsque l'on fait <code>save</code>, cela va crÃ©er une <b>nouvelle</b> ligne (sans tout effacerÂ !) dans le CSV qui contiendra en colonne 1 le <code>author</code> et en colonne 2 le <code>content</code> (sÃ©parÃ©s par une virgule donc, c'est le principe du CSV).</p>

<h5>2.2.5. Retour rapide au controller</h5>
<p>Maintenant que le model est capable de crÃ©er un gossip et de le sauvegarder, retouche la mÃ©thode <code>create_gossip</code> dans le controller en y ajoutant les lignes suivantes :</p>

<pre><code class="language-ruby">gossip = Gossip.new("Jean-Michel Concierge", "FÃ©fÃ© est de Bordeaux") #pour le moment, le contenu du gossip est en dur dans le code. L'utilisateur ne peut pas le changer.
gossip.save</code></pre>

<p>Si tout est bien branchÃ©, tu devrais voir apparaÃ®tre une ligne dans ton CSV avec ces paramÃ¨tres dÃ¨s que tu rentres <code>1</code> dans ton routeur. Ce qui, quand on y pense, est un super dÃ©butÂ : tu as rÃ©ussi Ã  brancher tout seul comme un grand un routeur, un controller, et le lier Ã  la base de donnÃ©es. Je n'ai quasiment rien fait. Joli ğŸ˜˜</p>

<p>Ã‰videmment, ce n'est pas encore fini, puisqu'il faut pouvoir rentrer les potins en base de maniÃ¨re interactive. Eh bien la view va s'occuper de gÃ©rer celaÂ !</p>

<h5>2.2.6. La view</h5>
<p>La view est appelÃ©e du controller. Il faut donc l'instancier Ã  partir du controller pour rediriger vers elle. Nous allons donc require le fichier view (qui contiendra la classe <code>View</code>) Ã  partir du controller, puis faire un petit <code>@view = View.new</code> Ã  l'initialisation du controller. Enfin, il suffira d'appeler la view dans la mÃ©thode <code>create_gossip</code> en ajoutant la ligne suivanteÂ : <code>params = @view.create_gossip</code>. Et oui, pour ne pas nous emmÃªler trop les pinceaux, on va se dÃ©brouiller pour que la mÃ©thode <code>create_gossip</code> de la classe <code>Controller</code> soit liÃ©e Ã  une mÃ©thode Ã©ponyme <code>create_gossip</code> de la classe <code>View</code>. Comme Ã§a c'est facile de s'en rappeler.</p>

<p>Ainsi, nous disons au controller d'exÃ©cuter la mÃ©thode <code>create_gossip</code> de la view afin de rÃ©cupÃ©rer les infos de l'utilisateur (= le contenu et l'auteur du nouveau gossip).</p>

<p>Ã‰videmment, si tu testes le programme, ce dernier va te saouler, car il faut crÃ©er le fichier view.rb. Ã‡a commence Ã  Ãªtre relou, MAIS ce sera la derniÃ¨re fois aujourd'hui que tu vas faire cela. GÃ©nial, nonÂ ? Une fois le fichier crÃ©Ã©, l'arborescence de ton dossier devrait Ãªtre identique Ã  l'arborescence que j'avais proposÃ©e au dÃ©but. Tu n'auras plus qu'Ã  crÃ©er les mÃ©thodes et faire les bons appels.</p>

<p>Alors rÃ©flechissons. Que voulons-nous que la mÃ©thode <code>create_gossip</code> de la classe <code>View</code> fasseÂ ? Elle doit demander deux variables (l'auteur et le contenu) Ã  l'utilisateur (via <code>puts</code> et <code>gets.chomp</code>), puis faire return sur ces deux variables. C'est tout.</p>

<p>Pour le return des variables, je t'invite Ã  le faire sous la forme d'un hashÂ : <code>return params = { content: content_que_tu_viens_de_demander, author: author_que_tu_viens_de_demander }</code>. Pourquoi comme ceciÂ ? Eh bien en gÃ©nÃ©ral pour les interactions avec les utilisateurs, dans le web on utilise une variable qui s'appelle <code>params</code> et qui est sous le format hash. Et c'est bien d'avoir dÃ¨s le dÃ©but les bons termes. <br>
Bien entendu, tu aurais pu enlever <code>params =</code> ce qui aurait donnÃ© exactement le mÃªme rÃ©sultat (une mÃ©thode retourne le contenu d'une variable, pas son nom), mais c'est pour plus de clartÃ©, ce qui n'est jamais de refus quand on dÃ©bute ğŸ˜‡</p>
<p>Je te laisse coder la mÃ©thode <code>create_gossip</code> de la classe <code>View</code></p>

<h5>2.2.7. Retour au controller</h5>
<p>EncoreÂ ? Eh oui, le controller est le chef d'orchestre, donc c'est normal d'y faire des aller-retoursÂ ! Maintenant, si ton programme est bien branchÃ©, la mÃ©thode <code>create_gossip</code> de <code>Controller</code> devrait avoir Ã  sa disposition une variable <code>params</code> qui est un hash qui contient les informations que tu veux. </p>

<div class="card box-shadow-0 border-info">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">ğŸš€ ALERTE BONNE ASTUCE</h4>
        <p>GalÃ¨re de variable mal placÃ©eÂ ? Tu ne sais pas trop comment jouer avec <code>params</code>Â ? N'oublie pas ma phrase prÃ©fÃ©rÃ©eÂ : "dans le doute, fous des <code>puts</code>". Et n'hÃ©site pas Ã  faire plein de tests avec PRY, trÃ¨s pratique pour jouer avec des variables rÃ©calcitrantes.</p>
    </div>
  </div>
</div>


<p>Maintenant, injecte les valeurs de ton hash <code>params</code> dans le <code>Gossip.new(author, content)</code>, et Ã  toi la gloireÂ !</p>

<h5>2.2.8. CrÃ©ation terminÃ©eÂ !</h5>
<p>WaowÂ ! Tu as rÃ©ussi Ã  faire â€“presqueâ€“ tout seul une crÃ©ation de potin en MVCÂ ! Si c'est pas la classe Ã§a, <i>I don't know what it is</i> ğŸ˜</p>

<p>Maintenant, on va pouvoir s'Ã©clater avec la suiteÂ : nous allons pouvoir afficher tous les potins, puis Ã©videmment supprimer de la base les potins qui ne sont plus d'actualitÃ©. C'est partiÂ !</p>

<h4>2.3. Afficher les potins</h4>
<p>Cette partie sera un peu moins pas Ã  pas, mais quand mÃªme on va t'aider. Tout d'abord, avant de foncer tÃªte baissÃ©e dans le code, nous allons rÃ©flÃ©chir Ã  ce qu'il faut.</p>

<p>Nous voudrions pouvoir, quand l'utilisateur le demande, afficher tous les potins en base. Cela veut direÂ : laisser la possibilitÃ© Ã  l'utilisateur de choisir l'option <code>2. Afficher tous les potins</code> via le routeur, ce qui va le rediriger vers la mÃ©thode <code>index_gossips</code> de notre controller. La mÃ©thode <code>index_gossips</code> va demander au model de lui sortir tous les potins, puis les donner Ã  la view pour qu'elle puisse les afficher. Du MVC dans toute sa splendeur. Allez c'est partiÂ !</p>

<h5>2.3.1. Le router</h5>
<p>C'est la partie la plus simpleÂ : il faut pouvoir dire Ã  l'utilisateur qu'il peut choisir <code>2</code>, qui est le numÃ©ro pour afficher tous les potins. S'il choisit <code>2</code>, nous allons le rediriger vers la mÃ©thode <code>index_gossips</code> de notre controller.</p>

<h5>2.3.2. Le controller</h5>
<p>La mÃ©thode <code>index_gossips</code> du controller va faire deux chose :</p>
<ul>
  <li>Demander au model un array qui contient toutes les potins que l'on a en base</li>
  <li>demander Ã  la view dâ€™exÃ©cuter sa propre mÃ©thode <code>index_gossips</code> qui affichera tous les potins</li>
</ul>

<h5>2.3.3. Le model</h5>
<p>Pour ceci, nous allons utiliser une mÃ©thode qui s'appelle <code>self.all</code>, qui va lire chaque ligne du CSV, puis retourner un array contenant des <b>instances</b> de potins du genre : <code>[potin_1, potin_2, â€¦, potin_n]</code>. J'insiste sur un point: il s'agit d'un <b>array d'objets de la classe <code>Gossip</code></b>. Donc si je fais <code>potin_1.author</code>, je rÃ©cupÃ¨re l'auteur du potin_1. Si je fais <code>potin_2.content</code>, je rÃ©cupÃ¨re le contenu du potin_2. Et ainsi de suite.</p>

<p>Comme ce n'est pas la mÃ©thode la plus simple, nous allons te donner le pseudo-code de la mÃ©thode <code>self.all</code>, pour t'aiguiller dans la recherche de l'array parfait :</p>

<pre><code class="language-ruby">def self.all
  # crÃ©ation d'une array vide qui s'appelle all_gossips
  # chaque ligne de ton CSV.each do |ligne|
    # gossip_provisoire = Gossip.new(paramÃ¨tres de la ligne) - permet de crÃ©er un objet gossip
    # all_gossips &lt;&lt; gossip_provisoire - permet de rajouter cet objet au array
  # end
  # return all_gossips - on renvoie le rÃ©sultat
end</code></pre>

<div class="card box-shadow-0 border-success">
  <div class="card-content collapse show">
    <div class="card-body">
      <h4 class="card-title">ğŸ¤“ QUESTION RÃ‰CURRENTE</h4>
      <p><b>Mais dis donc Jamy, c'est quoi la diffÃ©rence entre <code>def truc</code> et <code>def self.truc</code>Â ?</b> Excellente question car cela peut porter Ã  confusion la premiÃ¨re fois qu'on l'utilise.</p>
      <p>On en a parlÃ© dans le cours de POO: une mÃ©thode <code>self.truc</code> est une mÃ©thode de classe qui s'appelle sur une classe entiÃ¨re (en faisant <code>NomDeTaClasse.truc</code>). Une mÃ©thode <code>truc</code> est une mÃ©thode d'instance qui s'appelle sur une instance (en faisant <code>nom_de_l_instance.truc</code>).</p>
      <p>Prenons l'exemple de ton potinÂ : si tu veux sauvegarder un potin <code>mon_potin</code> pour le mettre en base, tu ne vas pas faire <code>Gossip.save</code>, mais plutÃ´t <code>mon_potin.save</code>. La sauvegarde est plutÃ´t une mÃ©thode d'instance. <br>
      Idem pour retourner la liste des potins que tu as en base, tu ne vas pas faire <code>mon_potin.all</code>, mais plutÃ´t <code>Gossip.all</code>. RÃ©cupÃ©rer toutes les instances en base est plutÃ´t une mÃ©thode de classe.</p>
      <p>DeuxiÃ¨me exemple (et on passe Ã  la suite promis), si tu devais recoder la mÃ©thode <code>new</code> (Ã  ne jamais faire), et bien tu ferais <code>self.new</code> car tu crÃ©Ã©s un potin en faisant <code>Gossip.new</code>, et non pas en faisant <code>mon_potin.new</code>.</p>
    </div>
  </div>
</div>


<h5>2.3.4. La view</h5>
<p>Maintenant que tu as une array qui contient tous les potins de ta base, tu as juste Ã  la donner Ã  la view, pour qu'elle les affiche. Une mÃ©thode <code>index_gossips(gossips)</code> qui contient l'array de tes potins en paramÃ¨tres fera trÃ¨s bien l'affaire. En faisant faire Ã  cette mÃ©thode un petit <code>.each</code> sur ton array, tu pourras <code>puts</code> chaque potin du array. Et voilÃ , tu as affichÃ© les potins de ta baseÂ !</p>

<h5>2.3.5. Index terminÃ©Â !</h5>
<p>PfiouÂ ! Tu es en grande forme aujourd'huiÂ ! Tu commences Ã  maÃ®triser super bien le MVC, et maintenant tu vas pouvoir passer Ã  la fonctionnalitÃ© suivanteÂ : la possibilitÃ© de dÃ©truire un potin. ğŸ’£</p>

<h4>2.4. Destroy</h4>
<p>Pour cette derniÃ¨re mÃ©thode, un peu plus complexe que les deux autres, nous allons te laisser gÃ©rer le truc, comme un grand. Il existe plein de mÃ©thodes diffÃ©rentes, mais en gros le programme va demander Ã  l'utilisateur quel potin il veut supprimer, puis le programme le retirera ce potin du CSV.</p>

<h4>2.5. Et voilÃ </h4>
<p>Et bien bravo, tu as rÃ©ussi Ã  faire une application qui propose Ã  l'utilisateur de balancer ses potins sur THP, en mode MVC. Bien jouÃ©, et on espÃ¨re que la fiertÃ© s'empare de toi.</p>

<h3>3. Rendu attendu</h3>
<p>Tu devras rendre une application qui demande en boucle Ã  l'utilisateur s'il veut afficher, crÃ©er, ou dÃ©truire des potins. Si tu fermes l'application, les donnÃ©es restent sauvegardÃ©es grÃ¢ce Ã  un systÃ¨me de gestion de base de donnÃ©es en CSV ou en JSON.</p>

<p>Voici l'arborescence du programme :</p>
<pre><code class="language-shell">.
â”œâ”€â”€ lib
â”‚    â”œâ”€â”€ controller.rb
â”‚    â”œâ”€â”€ gossip.rb
â”‚    â”œâ”€â”€ router.rb
â”‚    â””â”€â”€ view.rb
â”œâ”€â”€ db
â”‚   â””â”€â”€ gossip.csv
â”œâ”€â”€ app.rb
â”œâ”€â”€ Gemfile
â””â”€â”€ Gemfile.lock</code></pre>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>



</div>


  </div>
</div>
    <script src="/packs/dashboard-031178fac0de4f91cbcc.js"></script>
    

    <script charset="utf-8">
      $('input[name=authenticity_token]').val($('meta[name=csrf-token]').attr('content'));
    </script>

  </body>
</html>
